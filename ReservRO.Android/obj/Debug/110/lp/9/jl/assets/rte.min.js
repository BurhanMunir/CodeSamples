(()=>{"use strict";function e(e,t){var n=t;return n.unshift(void 0),new(Function.prototype.bind.apply(e,n))}function t(e,t){for(var n=t,r=e.replace(/\[/g,".").replace(/\]/g,"").split("."),i=0;i<r.length&&!l(n);i++)n=n[r[i]];return n}function n(e,t,n){var r,i,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=n||{},l=a,d=o.length;for(r=0;r<d;r++)i=o[r],r+1===d?l[i]=void 0===t?{}:t:s(l[i])&&(l[i]={}),l=l[i];return a}function r(e){return!s(e)&&e.constructor==={}.constructor}function i(e,t){return e[t]}function o(e,t){if(!s(t))for(var n=e,i=t,o=0,l=Object.keys(t);o<l.length;o++){var d=l[o];s(n.deepMerge)||-1===n.deepMerge.indexOf(d)||!r(i[d])&&!Array.isArray(i[d])?n[d]=i[d]:a(n[d],n[d],i[d],!0)}}function a(e,t,n,i){var o=e&&"object"==typeof e?e:{},s=arguments.length;i&&(s-=1);for(var l=function(e){if(!d[e])return"continue";var t=d[e];Object.keys(t).forEach((function(e){var n,s=o[e],l=t[e],d=Array.isArray(l)&&Array.isArray(s)&&l.length!==s.length,c=!p()||!(s instanceof Event||d);i&&c&&(r(l)||Array.isArray(l))?r(l)?(n=s||{},Array.isArray(n)&&n.hasOwnProperty("isComplexArray")?a(n,{},l,i):o[e]=a(n,{},l,i)):(n=p()?s&&Object.keys(l).length:s||[],o[e]=a([],n,l,i)):o[e]=l}))},d=arguments,c=1;c<s;c++)l(c);return o}function s(e){return null==e}function l(e){return void 0===e}function d(e,t){var n;return function(){var r=this,i=arguments,o=function(){return n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(o,t)}}function c(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function h(e){var t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function p(){return false}var u=/^svg|^path|^g/;function m(e,t){var n=u.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(n.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(n.className=t.className),void 0!==t.id&&(n.id=t.id),void 0!==t.styles&&n.setAttribute("style",t.styles),void 0!==t.attrs&&E(n,t.attrs)),n}function f(e,i){for(var o=v(i),a=0,l=e;a<l.length;a++)for(var d=l[a],c=0,h=o;c<h.length;c++){var p=h[c];if(r(d)){var u=t("attributes.className",d);s(u)?n("attributes.className",p,d):new RegExp("\\b"+p+"\\b","i").test(u)||n("attributes.className",u+" "+p,d)}else d.classList.contains(p)||d.classList.add(p)}return e}function g(e,i){for(var o=v(i),a=0,s=e;a<s.length;a++){var l=s[a],d=r(l);if(d?t("attributes.className",l):""!==l.className)for(var c=0,h=o;c<h.length;c++){var p=h[c];if(d){var u=t("attributes.className",l).split(" "),m=u.indexOf(p);-1!==m&&u.splice(m,1),n("attributes.className",u.join(" "),l)}else l.classList.remove(p)}}return e}function v(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function y(e,t,n){for(var r=document.createDocumentFragment(),i=0,o=e;i<o.length;i++){var a=o[i];r.appendChild(a)}return t.insertBefore(r,t.firstElementChild),n&&C(t),e}function b(e,t,n){for(var r=document.createDocumentFragment(),i=0,o=e;i<o.length;i++){var a=o[i];r.appendChild(a)}return t.appendChild(r),n&&C(t),e}function C(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),N(t)}))}function N(e){var t=e.parentNode;if(t)return t.removeChild(e)}function E(e,t){for(var n=e,i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];if(r(n)){var s=a;"tabindex"===a&&(s="tabIndex"),n.attributes[s]=t[a]}else n.setAttribute(a,t[a])}return n}function M(e,t,n){return void 0===t&&(t=document),e=w(e),t.querySelector(e)}function S(e,t,n){return void 0===t&&(t=document),e=w(e),t.querySelectorAll(e)}function w(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var n=e.split(","),r=0;r<n.length;r++){for(var i=n[r].split(" "),o=0;o<i.length;o++)if(i[o].indexOf("#")>-1&&!i[o].match(/\[.*\]/)){var a=i[o].split("#");if(a[1].match(/^\d/)||a[1].match(t)){var s=i[o].split(".");s[0]=s[0].replace(/#/,"[id='")+"']",i[o]=s.join(".")}}n[r]=i.join(" ")}return n.join(",")}return e}function T(e,t){var n=e;if("function"==typeof n.closest)return n.closest(t);for(;n&&1===n.nodeType;){if(L(n,t))return n;n=n.parentNode}return null}function x(e,t){void 0!==t&&Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function L(e,t){var n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return n?n.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var D=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,k=/msie|trident/i,O=/Trident\/7\./,R=/(ipad|iphone|ipod touch)/i,P=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,A=/android/i,H=/trident|windows phone|edge/i,I=/(version)[ /]([\w.]+)/i,B={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var F=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},n=[],r=0,i=Object.keys(B);r<i.length;r++){var o=i[r];if(n=e.userAgent.match(B[o])){if(t.name="opr"===n[1].toLowerCase()?"opera":n[1].toLowerCase(),t.name="crios"===n[1].toLowerCase()?"chrome":t.name,t.version=n[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(O)){t.name="msie";break}var a=e.userAgent.match(I);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var n={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?n[t].isPointer:e.isTouch?n[t].isTouch+(e.isDevice?"":" "+n[t].isDevice):n[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,n){var r=window.browserDetails;return void 0===r[t]?r[t]=n.test(e.userAgent):("MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===e.isTouch&&(r.isIos=!0,r.isDevice=!0,r.isTouch=!0,r.isPointer=!0),r[t])},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return l(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",k)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return l(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return l(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return l(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",D)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",R)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",P)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",A)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return l(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(l(window.cordova)&&l(window.PhoneGap)&&l(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",H)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return l(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return l(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return l(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return l(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}(),j=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,n,r,i,o){var a,s=e.addOrGetEventData(t);a=o?d(r,o):r,i&&(a=a.bind(i));for(var l=n.split(" "),c=0;c<l.length;c++)s.push({name:l[c],listener:r,debounce:a}),F.isIE?t.addEventListener(l[c],a):t.addEventListener(l[c],a,{passive:!1});return a},e.remove=function(t,n,r){for(var i=e.addOrGetEventData(t),o=n.split(" "),a=function(e){var n,a=-1;i&&0!==i.length&&i.some((function(t,i){return t.name===o[e]&&t.listener===r&&(a=i,n=t.debounce,!0)})),-1!==a&&i.splice(a,1),n&&t.removeEventListener(o[e],n)},s=0;s<o.length;s++)a(s)},e.clearEvents=function(t){var n,r;r=a([],r,n=e.addOrGetEventData(t));for(var i=0;i<r.length;i++)t.removeEventListener(r[i].name,r[i].debounce),n.shift()},e.trigger=function(t,n,r){for(var i=0,o=e.addOrGetEventData(t);i<o.length;i++){var a=o[i];a.name===n&&a.debounce.call(this,r)}},e}();function z(t,n,r,i){return t.properties.hasOwnProperty(n)&&t.properties[n]instanceof i||(t.properties[n]=e(i,[t,n,r])),t.properties[n]}function G(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function q(e,t){return function(n){if(this.properties[t]!==n){var r=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,n,r),this.properties[t]=n}}}function _(e,t,n){return function(){return z(this,t,e,n)}}function U(e,t,n){return function(r){z(this,t,e,n).setProperties(r)}}function W(e){return function(t,n){var r={set:q(e,n),get:G(e,n),enumerable:!0,configurable:!0};Object.defineProperty(t,n,r),J(t,n,"prop",e)}}function V(e,t){return function(n,r){var i={set:U(e,r,t),get:_(e,r,t),enumerable:!0,configurable:!0};Object.defineProperty(n,r,i),J(n,r,"complexProp",e,t)}}function K(){return function(e,t){var n={set:function(e){var n=this.properties[t];if(n!==e){var r=X(this,t);!1===l(n)&&r.context.removeEventListener(r.prefix,n),r.context.addEventListener(r.prefix,e),this.properties[t]=e}},get:G(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,n),J(e,t,"event")}}function $(e){}function J(e,t,n,r,i){l(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[n+"s"].push({propertyName:t,defaultValue:r,type:i}),e.propList[n+"Names"].push(t)}function X(e,n){if(!1===e.hasOwnProperty("parentObj"))return{context:e,prefix:n};var r=t("propName",e);return r&&(n=r+"-"+n),X(t("parentObj",e),n)}var Y,Z,Q=function(){function r(e){this.loadedModules=[],this.parent=e}return r.prototype.inject=function(t,r){var i=t.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(t);for(var o=0;o<i;o++)for(var a=t[o],s=0,l=r;s<l.length;s++){var d=l[s],c=a.member;if(d.prototype.getModuleName()===a.member&&!this.isModuleLoaded(c)){var h=e(d,a.args),p=this.getMemberName(c);a.isProperty?n(p,d,this.parent):n(p,h,this.parent);var u=a;u.member=p,this.loadedModules.push(u)}}}else this.clean()},r.prototype.clean=function(){for(var e=0,n=this.loadedModules;e<n.length;e++){var r=n[e];r.isProperty||t(r.member,this.parent).destroy()}this.loadedModules=[]},r.prototype.clearUnusedModule=function(e){for(var n=this,r=e.map((function(e){return n.getMemberName(e.member)})),i=0,o=this.loadedModules.filter((function(e){return-1===r.indexOf(e.member)}));i<o.length;i++){var a=o[i];a.isProperty||t(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),delete this.parent[a.member]}},r.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},r.prototype.isModuleLoaded=function(e){for(var t=0,n=this.loadedModules;t<n.length;t++)if(n[t].member===this.getMemberName(e))return!0;return!1},r}(),ee=function(){function e(e){this.ranArray=[],this.boundedEvents={},s(e)||(this.context=e)}return e.prototype.on=function(e,t,n,r){if(!s(t)){var i=n||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:i}]:s(r)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:i}):-1===this.ranArray.indexOf(r)&&(this.ranArray.push(r),this.boundedEvents[e].push({handler:t,context:i,id:r}))}},e.prototype.off=function(e,n,r){if(!this.notExist(e)){var i=t(e,this.boundedEvents);if(n){for(var o=0;o<i.length;o++)if(r){if(i[o].id===r){i.splice(o,1);var a=this.ranArray.indexOf(r);-1!==a&&this.ranArray.splice(a,1);break}}else if(n===i[o].handler){i.splice(o,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,n,r,i){if(this.notExist(e))r&&r.call(this,n);else{n&&(n.name=e);var o=t(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,n,r,i,0);for(var a=0,s=o;a<s.length;a++){var l=s[a];l.handler.call(l.context,n)}r&&r.call(this,n)}},e.prototype.blazorCallback=function(e,t,n,r,i){var o=this,s=i===e.length-1;if(i<e.length){var l=e[i],d=l.handler.call(l.context,t);if(d&&"function"==typeof d.then){if(!n)return d;d.then((function(d){if(d="string"==typeof d&&o.isJson(d)?JSON.parse(d,o.dateReviver):d,a(t,t,d,!0),!n||!s)return o.blazorCallback(e,t,n,r,i+1);n.call(l.context,t)})).catch((function(e){r&&r.call(l.context,"string"==typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)}))}else{if(!n||!s)return this.blazorCallback(e,t,n,r,i+1);n.call(l.context,t)}}},e.prototype.dateReviver=function(e,t){return p&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var n=0,r=e;n<r.length;n++)if(r[n].handler===t)return!0;return!1},e}(),te=new RegExp("]"),ne=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new ee(this),l(t)||(this.element="string"==typeof t?document.querySelector(t):t,s(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),l(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var n=this.isProtectedOnChange;this.isProtectedOnChange=!!t,o(this,e),!0!==t&&(o(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=n},e.callChildDataBind=function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t[i]instanceof Array)for(var o=0,a=t[i];o<a.length;o++){var s=a[o];void 0!==s.dataBind&&s.dataBind()}else t[i].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,n=this.changedProperties,r=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(n,r),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){0},e.prototype.saveChanges=function(e,t,n){this.isProtectedOnChange||(this.oldProperties[e]=n,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,n=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(n);var r="ej2"+function(e){for(var t="",n=0;n<5;n++)t+=(n?",":"")+e[n];return t}(n),i=function(n){n.source===window&&"string"==typeof n.data&&n.data.length<=32&&n.data===r&&(e(),t())};return window.addEventListener("message",i,!1),window.postMessage(r,"*"),t=function(){window.removeEventListener("message",i),e=i=r=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,n,r,i){var o=this;if(!0!==this.isDestroyed){var a=this.isProtectedOnChange;this.isProtectedOnChange=!1;var s=this.modelObserver.notify(e,n,r,i);if(te.test(e)){var l=t(e,this);if(l)if(window.Blazor){var d=l.call(this,n);d&&"function"==typeof d.then?r?d.then((function(e){r&&(e="string"==typeof e&&o.modelObserver.isJson(e)?JSON.parse(e):e,r.call(o,e))})).catch((function(e){i&&(e="string"==typeof e&&o.modelObserver.isJson(e)?JSON.parse(e):e,i.call(o,e))})):s=d:r&&r.call(this,n)}else l.call(this,n),r&&r.call(this,n);else r&&r.call(this,n)}return this.isProtectedOnChange=a,s}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();f([this.element],["e-lib",e]),s(this.element.ej2_instances)?n("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),g([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&g([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}(),re=function(){function e(e,n,r,i){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=t("callChildDataBind",ne),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=n,this.isParentArray=i,this.setProperties(r,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(o(this,e),this.updateChange(!1,this.propName),this.clearChanges()):o(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(n(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),n(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,n,r){this.controlParent.isProtectedOnChange||(r||this.serverDataBind(e,t,!0),this.oldProperties[e]=n,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,n,r){},e.prototype.getParentKey=function(e){var t="",n=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var r=this.parentObj[this.propName].length;r=e?r:r>0?r-1:0,n+=t=-1!==t?"-"+t:"-"+r}return this.controlParent!==this.parentObj&&(n=this.parentObj.getParentKey()+"."+this.propName+t),n},e}(),ie={latn:{_digits:"0123456789",_type:"numeric"}},oe={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},ae=[0,1,2,3,4,5,6,7,8,9],se=function(){function e(){}return e.getMainObject=function(e,n){return t("main."+n,e)},e.getNumberingSystem=function(e){return t("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var n={},r=0,i=t||Object.keys(e);r<i.length;r++){var o=i[r];n.hasOwnProperty(e[o])||(n[e[o]]=o)}return n},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},n=0,r=Object.keys(oe);n<r.length;n++){var i=r[n];t[e[i]]=oe[i]}return t},e.constructRegex=function(e){for(var t=e.length,n="",r=0;r<t;r++)n+=r!==t-1?e[r]+"|":e[r];return n},e.convertValueParts=function(e,t,n){return e.replace(t,(function(e){return n[e]}))},e.getDefaultNumberingSystem=function(e){var n={};return n.obj=t("numbers",e),n.nSystem=t("defaultNumberingSystem",n.obj),n},e.getCurrentNumericOptions=function(e,n,r,i){var o={},a=this.getDefaultNumberingSystem(e);if(!l(a.nSystem)||i){var s=i?t("obj.mapperDigits",a):t(a.nSystem+"._digits",n);l(s)||(o.numericPair=this.reverseObject(s,ae),o.numberParseRegex=new RegExp(this.constructRegex(s),"g"),o.numericRegex="["+s[0]+"-"+s[9]+"]",r&&(o.numericRegex=s[0]+"-"+s[9],o.symbolNumberSystem=t(i?"numberSymbols":"symbols-numberSystem-"+a.nSystem,a.obj),o.symbolMatch=this.getSymbolMatch(o.symbolNumberSystem),o.numberSystem=a.nSystem))}return o},e.getNumberMapper=function(e,n,r){var i={mapper:{}},o=this.getDefaultNumberingSystem(e);if(!l(o.nSystem)){i.numberSystem=o.nSystem,i.numberSymbols=t("symbols-numberSystem-"+o.nSystem,o.obj),i.timeSeparator=t("timeSeparator",i.numberSymbols);var a=t(o.nSystem+"._digits",n);if(!l(a))for(var s=0,d=ae;s<d.length;s++){var c=d[s];i.mapper[c]=a[c]}}return i},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=ie,e}(),le={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.‏",BHD:"د.ب.‏",DZD:"د.ج.‏",EGP:"ج.م.‏",ILS:"₪",IQD:"د.ع.‏",JOD:"د.ا.‏",KMF:"CF",KWD:"د.ك.‏",LBP:"ل.ل.‏",LYD:"د.ل.‏",MAD:"د.م.‏",MRU:"أ.م.",OMR:"ر.ع.‏",QAR:"ر.ق.‏",SAR:"ر.س.‏",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.‏",TND:"د.ت.‏",YER:"ر.ي.‏",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"},de={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},ce=["infinity","nan","group","decimal","exponential"],he=function(){function e(){}return e.numberFormatter=function(e,t,n){var r,i=this,o=a({},t),s={},d={},c=Y.getDependables(n,e,"",!0);c.numericObject;d.numberMapper=se.getNumberMapper(c.parserObject,se.getNumberingSystem(n),!0),d.currencySymbol=Y.getCurrencySymbol(c.numericObject,o.currency||Ne,t.altSymbol),d.percentSymbol=d.numberMapper.numberSymbols.percentSign,d.minusSymbol=d.numberMapper.numberSymbols.minusSign;var h=d.numberMapper.numberSymbols;if(t.format&&!Y.formatRegex.test(t.format))s=Y.customFormat(t.format,d,c.numericObject);else{a(o,Y.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,r=Y.getSymbolPattern(o.type,d.numberMapper.numberSystem,c.numericObject,o.isAccount),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),l(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),l(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&(r=r.replace(/\u00A4/g,Y.defaultCurrency));var p=r.split(";");if(s.nData=Y.getFormatData(p[1]||"-"+p[0],!0,d.currencySymbol),s.pData=Y.getFormatData(p[0],!1,d.currencySymbol),o.useGrouping&&(o.groupSeparator=h[ce[2]],o.groupData=this.getGroupingDetails(p[0])),l(o.minimumFractionDigits)&&(o.minimumFractionDigits=s.nData.minimumFraction),l(o.maximumFractionDigits)){var u=s.nData.maximumFraction;o.maximumFractionDigits=l(u)&&o.isPercent?0:u}var m=o.minimumFractionDigits,f=o.maximumFractionDigits;l(m)||l(f)||m>f&&(o.maximumFractionDigits=m)}return a(s.nData,o),a(s.pData,o),function(e){return isNaN(e)?h[ce[1]]:isFinite(e)?i.intNumberFormatter(e,s,d):h[ce[0]]}},e.getGroupingDetails=function(e){var t={},n=e.match(Y.negativeDataRegex);if(n&&n[4]){var r=n[4],i=r.lastIndexOf(",");if(-1!==i){var o=r.split(".")[0];t.primary=o.length-i-1;var a=r.lastIndexOf(",",i-1);-1!==a&&(t.secondary=i-1-a)}}return t},e.checkValueRange=function(e,t,n,r){var i=r?"f":"s",o=0,a=de["l"+i],s=de["m"+i];if(l(e)||(this.checkRange(e,a,r),o++),l(t)||(this.checkRange(t,s,r),o++),2===o){if(!(e<t))return!0;c(s+"specified must be less than the"+a)}else n&&1===o&&c("Both"+s+"and"+s+"must be present");return!1},e.checkRange=function(e,t,n){var r=n?[0,20]:[1,21];(e<r[0]||e>r[1])&&c(t+"value must be within the range"+r[0]+"to"+r[1])},e.intNumberFormatter=function(e,t,n){var r;if(!l(t.nData.type)){e<0?(e*=-1,r=t.nData):r=0===e&&t.zeroData||t.pData;var i="";return r.isPercent&&(e*=100),r.groupOne?i=this.processSignificantDigits(e,r.minimumSignificantDigits,r.maximumSignificantDigits):(i=this.processFraction(e,r.minimumFractionDigits,r.maximumFractionDigits),r.minimumIntegerDigits&&(i=this.processMinimumIntegers(i,r.minimumIntegerDigits))),"scientific"===r.type&&(i=(i=e.toExponential(r.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[ce[4]])),i=i.replace(".",n.numberMapper.numberSymbols[ce[3]]),r.useGrouping&&(i=this.groupNumbers(i,r.groupData.primary,r.groupSeparator||",",n.numberMapper.numberSymbols[ce[3]]||".",r.groupData.secondary)),i=se.convertValueParts(i,Y.latnParseRegex,n.numberMapper.mapper),"N/A"===r.nlead?r.nlead:r.nlead+i+r.nend}},e.processSignificantDigits=function(e,t,n){var r=e+"";return r.length<t?e.toPrecision(t):+(r=e.toPrecision(n))+""},e.groupNumbers=function(e,t,n,r,i){for(var o=!s(i)&&0!==i,a=e.split(r),l=a[0],d=l.length,c="";d>t;)c=l.slice(d-t,d)+(c.length?n+c:""),d-=t,o&&(t=i,o=!1);return a[0]=l.slice(0,d)+(c.length?n:"")+c,a.join(r)},e.processFraction=function(e,t,n){var r=(e+"").split(".")[1],i=r?r.length:0;if(t&&i<t){var o="";if(0!==i){o+=e;for(var a=0;a<t-i;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!s(n)&&(i>n||0===n)?e.toFixed(n):e+""},e.processMinimumIntegers=function(e,t){var n=e.split("."),r=n[0],i=r.length;if(i<t){for(var o=0;o<t-i;o++)r="0"+r;n[0]=r}return n.join(".")},e}(),pe={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var n=/[0-9]/g;e.defaultCurrency="$";var r=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,o={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi,e.islamicRegex=/^islamic/;var d={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var c={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function h(n,r,i,o,a){var s,d=i||"date";if(a)s=f({skeleton:n},a).format||f({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(n)){if(s=t(d+"Formats."+n,r),"dateTime"===d){var c=t("dateFormats."+n,r),h=t("timeFormats."+n,r);s=s.replace("{1}",c).replace("{0}",h)}}else s=t("dateTimeFormats.availableFormats."+n,r);l(s)&&"yMd"===n&&(s="M/d/y")}return s}function p(n,r,i,o){var a={},s=i||"gregorian";if(a.parserObject=se.getMainObject(n,r)||e.defaultObject,o)a.numericObject=t("numbers",a.parserObject);else{var l="dates.calendars."+s;a.dateObject=t(l,a.parserObject)}return a}function u(e,n,r,i){return t(e+"Formats-numberSystem-"+n+(i?".accounting":".standard"),r)||(i?t(e+"Formats-numberSystem-"+n+".standard",r):"")}function m(t){t.match(e.dateConverterMapper);return t}function f(e,n){var r=e.format||e.skeleton,i=t((n||"en-US")+"."+r,pe);return i||(i=t("en-US."+r,pe)),i&&(i=m(i),e.format=i.replace(/tt/,"a")),e}function g(t){var n=t.match(e.formatRegex),r={},i=n[1].toUpperCase();return r.isAccount="A"===i,r.type=e.patternMatcher[i],t.length>1&&(r.fractionDigits=parseInt(n[2],10)),r}function v(t,r,i,o){var a=o?{}:{nlead:"",nend:""},l=t.match(e.customRegex);if(l){o||(a.nlead=y(l[1],i),a.nend=y(l[10],i),a.groupPattern=l[4]);var d=l[7];if(d&&r){var c=d.match(n);s(c)?a.minimumFraction=0:a.minimumFraction=c.length,a.maximumFraction=d.length-1}}return a}function y(t,n){return t?t.replace(e.defaultCurrency,n):""}function b(e,n,r){return t("currencies."+n+(r?"."+r:".symbol"),e)||t("currencies."+n+".symbol-alt-narrow",e)||"$"}function C(t,n,i){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},l=t.match(e.customRegex);if(s(l)||""===l[5]&&"N/A"!==t)return o.type=void 0,o;o.nlead=l[1],o.nend=l[10];var d=l[6],c=!!d.match(/\ $/g),h=-1!==d.replace(/\ $/g,"").indexOf(" ");o.useGrouping=-1!==d.indexOf(",")||h,d=h?d.replace(/,/g,""):d.replace(/,/g,"").replace(/\ $/g,"");var p=l[7];if(-1!==d.indexOf("0")&&(o.minimumIntegerDigits=d.length-d.indexOf("0")),s(p)||(o.minimumFractionDigits=p.lastIndexOf("0"),o.maximumFractionDigits=p.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),s(n)?a(o,N([o.nlead,o.nend],"%","%")):(a(o,N([o.nlead,o.nend],"$",n.currencySymbol)),o.isCurrency||a(o,N([o.nlead,o.nend],"%",n.percentSymbol))),!s(i)){var m=u(o.type,n.numberMapper.numberSystem,i,!1);o.useGrouping&&(o.groupSeparator=h?" ":n.numberMapper.numberSymbols[r[2]],o.groupData=he.getGroupingDetails(m.split(";")[0])),o.nlead=o.nlead.replace(/'/g,""),o.nend=c?" "+o.nend.replace(/'/g,""):o.nend.replace(/'/g,"")}return o}function N(e,t,n){for(var r={nlead:e[0],nend:e[1]},i=0;i<2;i++){var o=e[i],a=o.indexOf(t);if(-1!==a&&(a<o.indexOf("'")||a>o.lastIndexOf("'"))){r[c[i]]=o.substr(0,a)+n+o.substr(a+1),r[c[t]]=!0,r.type=r.isCurrency?"currency":"percent";break}}return r}function E(e,t,n){e+=".";for(var r=0;r<t;r++)e+="0";if(t<n)for(var i=n-t,o=0;o<i;o++)e+="#";return e}function M(e,t){for(var n=e.split("."),r="",i=0;i<t;i++)r+="0";return n[1]?r+"."+n[1]:r}function S(e){var t=e.split("."),n=t[0],r=3-n.length%3;e="";for(var i=(n=(r&&1===r?"#":2===r?"##":"")+n).length-1;i>0;i-=3)e=","+n[i-2]+n[i-1]+n[i]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=h,e.getDependables=p,e.getSymbolPattern=u,e.ConvertDateToWeekFormat=m,e.compareBlazorDateFormats=f,e.getProperNumericSkeleton=g,e.getFormatData=v,e.changeCurrencySymbol=y,e.getCurrencySymbol=b,e.customFormat=function(e,t,n){for(var r={},i=e.split(";"),o=["pData","nData","zeroData"],l=0;l<i.length;l++)r[o[l]]=C(i[l],t,n);return s(r.nData)&&(r.nData=a({},r.pData),r.nData.nlead=s(t)?"-"+r.nData.nlead:t.minusSymbol+r.nData.nlead),r},e.customNumberFormat=C,e.isCurrencyPercent=N,e.getDateSeparator=function(e){var n=(t("dateFormats.short",e)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return n?n[1]:"/"},e.getActualDateTimeFormat=function(e,n,r,a){var s=p(r,e,n.calendar),l=n.format||h(n.skeleton,s.dateObject,n.type);if(a){if(l=l.replace(i,(function(e){return o[e]})),-1!==l.indexOf("z")){var d=l.match(/z/g).length,c=void 0,u={timeZone:{}};u.numMapper=se.getNumberMapper(s.parserObject,se.getNumberingSystem(r)),u.timeZone=t("dates.timeZoneNames",s.parserObject);var m=(new Date).getTimezoneOffset(),f=d<4?"+H;-H":u.timeZone.hourFormat;f=f.replace(/:/g,u.numMapper.timeSeparator),0===m?c=u.timeZone.gmtZeroFormat:(c=be.getTimeZoneValue(m,f),c=u.timeZone.gmtFormat.replace(/\{0\}/,c)),l=l.replace(/[z]+/,'"'+c+'"')}l=l.replace(/ $/,"")}return l},e.getActualNumberFormat=function(n,r,i,o){var s,l,d=p(i,n,"",!0),c={custom:!0},h=(d.numericObject,{}),m=(r.format||"").match(e.currencyFormatRegex),f=(e.formatRegex.test(r.format)&&g(r.format||"N"),{});if(m){f.numberMapper=se.getNumberMapper(d.parserObject,se.getNumberingSystem(i),!0);var y=b(d.numericObject,r.currency||Ne,r.altSymbol),C=u("currency",f.numberMapper.numberSystem,d.numericObject,/a/i.test(r.format)),N=(C=C.replace(/\u00A4/g,y)).split(";");h.hasNegativePattern=N.length>1,h.nData=v(N[1]||"-"+N[0],!0,y),h.pData=v(N[0],!1,y),m[2]||r.minimumFractionDigits||r.maximumFractionDigits||(s=v(C.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(r.format)||!r.format){if(a(c,g(r.format||"N")),c.custom=!1,l="###0",(c.fractionDigits||r.minimumFractionDigits||r.maximumFractionDigits||s)&&(c.fractionDigits&&(r.minimumFractionDigits=r.maximumFractionDigits=c.fractionDigits),l=E(l,s||c.fractionDigits||r.minimumFractionDigits||0,r.maximumFractionDigits||0)),r.minimumIntegerDigits&&(l=M(l,r.minimumIntegerDigits)),r.useGrouping&&(l=S(l)),"currency"===c.type||(c.type,0)){var w=l;l=h.pData.nlead+w+h.pData.nend,h.hasNegativePattern&&(l+=";"+h.nData.nlead+w+h.nData.nend)}"percent"!==c.type||(l+=" %")}else l=r.format.replace(/'/g,'"');return Object.keys(f).length>0&&(l=o?l:function(e,n){if(-1!==e.indexOf(",")){var r=e.split(",");e=r[0]+t("numberMapper.numberSymbols.group",n)+r[1].replace(".",t("numberMapper.numberSymbols.decimal",n))}else e=e.replace(".",t("numberMapper.numberSymbols.decimal",n));return e}(l,f)),l},e.fractionDigitsPattern=E,e.minimumIntegerPattern=M,e.groupingPattern=S,e.getWeekData=function(e,n){var r="sun",i=t("supplemental.weekData.firstDay",n),o=e;return/en-/.test(o)&&(o=o.slice(3)),o=o.slice(0,2).toUpperCase()+o.substr(2),i&&(r=i[o]||i[o.slice(0,2)]||"sun"),d[r]},e.replaceBlazorCurrency=function(e,n,r){var i=t(r||"",le);if(n!==i)for(var o=0,a=e;o<a.length;o++){var s=a[o];s.nend=s.nend.replace(n,i),s.nlead=s.nlead.replace(n,i)}},e.getWeekOfYear=function(e){var t,n=new Date(e.getFullYear(),0,1),r=n.getDay();r=r>=0?r:r+7;var i=Math.floor((e.getTime()-n.getTime()-6e4*(e.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)+1;if(r<4){if((t=Math.floor((i+r-1)/7)+1)>52){var o=new Date(e.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((i+r-1)/7);return t}}(Y||(Y={})),function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var n=e.getDate(),r=e.getMonth(),i=e.getFullYear(),o=r+1,a=i;o<3&&(a-=1,o+=12);var s=Math.floor(a/100),l=s-Math.floor(s/4)-2,d=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(o+1))+n-l-1524,c=d+(l=(s=Math.floor((d-1867216.25)/36524.25))-Math.floor(s/4)+1)+1524,h=Math.floor((c-122.1)/365.25),p=Math.floor(365.25*h),u=Math.floor((c-p)/30.6001);n=c-p-Math.floor(30.6001*u),(r=Math.floor((c-p)/20.6001))>13&&(h+=1,r-=12),r-=1,i=h-4716;var m=d-24e5,f=10631/30,g=d-1948084,v=Math.floor(g/10631);g-=10631*v;var y=Math.floor((g-.1335)/f),b=30*v+y;g-=Math.floor(y*f+.1335);var C=Math.floor((g+28.5001)/29.5);13===C&&(C=12);for(var N=g-Math.floor(29.5001*C-29),E=0;E<t.length&&!(t[E]>m);E++);var M=E+16260,S=Math.floor((M-1)/12),w=S+1,T=M-12*S,x=m-t[E-1]+1;return(x+"").length>2&&(x=N,T=C,w=b),{year:w,month:T,date:x}},e.toGregorian=function(e,n,r){var i=r+t[12*(e-1)+1+(n-1)-16260-1]-1+24e5,o=Math.floor(i+.5),a=Math.floor((o-1867216.25)/36524.25),s=1524+(a=o+1+a-Math.floor(a/4)),l=Math.floor((s-122.1)/365.25),d=Math.floor(365.25*l),c=Math.floor((s-d)/30.6001),h=s-d-Math.floor(30.6001*c),p=c-(c>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+h)}}(Z||(Z={}));var ue,me,fe=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,ge="stand-alone",ve=["sun","mon","tue","wed","thu","fri","sat"],ye={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},be=function(){function e(){}return e.dateFormat=function(e,n,r){var i=this,o=Y.getDependables(r,e,n.calendar),a=(t("parserObject.numbers",o),o.dateObject),s={isIslamic:Y.islamicRegex.test(n.calendar)},d=n.format||Y.getResultantPattern(n.skeleton,o.dateObject,n.type,!1,"");if(s.dateSeperator=Y.getDateSeparator(o.dateObject),l(d))c("Format options or type given must be invalid");else{d=Y.ConvertDateToWeekFormat(d),s.pattern=d,s.numMapper=se.getNumberMapper(o.parserObject,se.getNumberingSystem(r));for(var h=0,p=d.match(fe)||[];h<p.length;h++){var u=p[h],m=u.length,f=u[0];switch("K"===f&&(f="h"),f){case"E":case"c":s.weekday=o.dateObject[Y.days][ge][Y.monthIndex[m]];break;case"M":case"L":s.month=o.dateObject[Y.month][ge][Y.monthIndex[m]];break;case"a":s.designator=t("dayPeriods.format.wide",a);break;case"G":var g=m<=3?"eraAbbr":4===m?"eraNames":"eraNarrow";s.era=t("eras."+g,o.dateObject);break;case"z":s.timeZone=t("dates.timeZoneNames",o.parserObject)}}}return function(e){return isNaN(e.getDate())?null:i.intDateFormatter(e,s)}},e.intDateFormatter=function(e,t){for(var n="",r=t.pattern.match(Y.dateParseRegex),i=this.getCurrentDateValue(e,t.isIslamic),o=0,a=r;o<a.length;o++){var l=a[o],d=l.length,c=l[0];"K"===c&&(c="h");var h=void 0,p="",u=void 0,m=void 0,f="";switch(c){case"M":case"L":h=i.month,d>2?n+=t.month[h]:u=!0;break;case"E":case"c":n+=t.weekday[ve[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(u=!0,"d"===c)h=i.date;else if("f"===c){u=!1,m=!0;var g=(p=(p=e[ye[c]]().toString()).substring(0,d)).length;if(d!==g){if(d>3)continue;for(var v=0;v<d-g;v++)p="0"+p.toString()}f+=p}else h=e[ye[c]]();"h"===c&&(h=h%12||12);break;case"y":m=!0,f+=i.year,2===d&&(f=f.substr(f.length-2));break;case"a":var y=e.getHours()<12?"am":"pm";n+=t.designator[y];break;case"G":var b=e.getFullYear()<0?0:1,C=t.era[b];s(C)&&(C=t.era[b?0:1]),n+=C||"";break;case"'":n+="''"===l?"'":l.replace(/'/g,"");break;case"z":var N=e.getTimezoneOffset(),E=d<4?"+H;-H":t.timeZone.hourFormat;E=E.replace(/:/g,t.numMapper.timeSeparator),0===N?n+=t.timeZone.gmtZeroFormat:(m=!0,f=this.getTimeZoneValue(N,E)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":n+=t.numMapper.numberSymbols.timeSeparator;break;case"/":n+=t.dateSeperator;break;case"W":u=!0,h=Y.getWeekOfYear(e);break;default:n+=l}u&&(m=!0,f=this.checkTwodigitNumber(h,d)),m&&(n+=se.convertValueParts(f,Y.latnParseRegex,t.numMapper.mapper))}return n},e.getCurrentDateValue=function(e,t){return t?Z.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var n=e+"";return 2===t&&2!==n.length?"0"+n:n},e.getTimeZoneValue=function(e,t){var n=this,r=t.split(";")[e>0?1:0],i=Math.abs(e);return r.replace(/HH?|mm/g,(function(e){var t=e.length,r=-1!==e.indexOf("H");return n.checkTwodigitNumber(Math.floor(r?i/60:i%60),t)}))},e}(),Ce=new ee,Ne="USD",Ee=(ue=function(e,t){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ue(e,t)},function(e,t){function n(){this.constructor=e}ue(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Me=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Se=0,we=0,Te=function(e){function r(t,n){var r=e.call(this,t,n)||this;return r.randomId=function(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),r.isStringTemplate=!1,r.needsID=!1,r.isReactHybrid=!1,s(r.enableRtl)&&r.setProperties({enableRtl:false},!0),s(r.locale)&&r.setProperties({locale:"en-US"},!0),r.moduleLoader=new Q(r),r.localObserver=new ee(r),Ce.on("notifyExternalChange",r.detectFunction,r,r.randomId),l(n)||r.appendTo(),r}return Ee(r,e),r.prototype.requiredModules=function(){return[]},r.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(g([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),Ce.off("notifyExternalChange",this.detectFunction,this.randomId)))},r.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new ee(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},r.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},r.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},r.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)},r.prototype.appendTo=function(n){if(s(n)||"string"!=typeof n?s(n)||(this.element=n):this.element=M(n,document),!s(this.element)){var r="e-"+this.getModuleName().toLowerCase();f([this.element],["e-control",r]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var i=t("ej2_instances",this.element);i&&-1!==i.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},r.prototype.renderComplete=function(e){this.isRendered=!0},r.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},r.prototype.on=function(e,t,n){if("string"==typeof e)this.localObserver.on(e,t,n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];this.localObserver.on(o.event,o.handler,o.context)}},r.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var n=0,r=e;n<r.length;n++){var i=r[n];this.localObserver.off(i.event,i.handler)}},r.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},r.prototype.getInjectedModules=function(){return this.injectedModules},r.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[n])&&this.prototype.injectedModules.push(e[n])},r.prototype.createElement=function(e,t,n){return m(e,t)},r.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},r.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},r.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},r.prototype.mergePersistData=function(){var e;s(e=window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},r.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},r.prototype.appendReactElement=function(e,t){},r.prototype.renderReactTemplates=function(){},r.prototype.clearTemplate=function(e,t){},r.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(Se=0),me=this.pageID(location.href),we=history.length,e+"_"+me+"_"+Se++},r.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t)},r.prototype.isHistoryChanged=function(){return me!==this.pageID(location.href)||we!==history.length},r.prototype.addOnPersist=function(e){for(var r=this,i={},o=0,a=e;o<a.length;o++){var s,d=a[o];l(s=t(d,this))||n(d,this.getActualProperties(s),i)}return JSON.stringify(i,(function(e,t){return r.getActualProperties(t)}))},r.prototype.getActualProperties=function(e){return e instanceof re?t("properties",e):e},r.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},r.prototype.iterateJsonProperties=function(e,t){for(var n={},r=function(r){if(-1===t.indexOf(r)){var o=e[r];if("object"!=typeof o||o instanceof Array)n[r]=o;else{var a=t.filter((function(e){return new RegExp(r+".").test(e)})).map((function(e){return e.replace(r+".","")}));n[r]=i.iterateJsonProperties(i.getActualProperties(o),a)}}},i=this,o=0,a=Object.keys(e);o<a.length;o++)r(a[o]);return n},Me([W(!1)],r.prototype,"enablePersistence",void 0),Me([W()],r.prototype,"enableRtl",void 0),Me([W()],r.prototype,"locale",void 0),Me([$],r)}(ne);"undefined"!=typeof window&&window.addEventListener("popstate",(function(){Se=0}));var xe=new RegExp("\\n|\\r|\\s\\s+","g"),Le=new RegExp(/'|"/g),De=new RegExp("if ?\\("),ke=new RegExp("else if ?\\("),Oe=new RegExp("else"),Re=new RegExp("for ?\\("),Pe=new RegExp("(/if|/for)"),Ae=new RegExp("\\((.*)\\)",""),He=new RegExp("^[0-9]+$","g"),Ie=new RegExp("[\\w\"'.\\s+]+","g"),Be=new RegExp('"(.*?)"',"g"),Fe=new RegExp("[\\w\"'@#$.\\s-+]+","g"),je=new RegExp("\\${([^}]*)}","g"),ze=/^\..*/gm,Ge=/\\/gi,qe=/\\\\/gi,_e=new RegExp("[\\w\"'@#$.\\s+]+","g"),Ue=/\window\./gm;function We(e,t,n,r,i){return!t||He.test(e)||-1!==r.indexOf(e.split(".")[0])||i?e:n+"."+e}function Ve(e,t,n,r){return t&&!He.test(e)&&-1===r.indexOf(e.split(".")[0])?n+'["'+e:e}function Ke(e){return e.match(qe)?e:e.replace(Ge,"\\\\")}function $e(e,t,n,r){if(e=e.trim(),/\window\./gm.test(e))return e;var i=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=Ve(e,-1===n.indexOf(e),t,n)+'"]'),ze.test(e)?function(e,t,n,r){return!t||He.test(e)||-1!==r.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:n+"."+e}(e,!i.test(e)&&-1===n.indexOf(e),t,n):We(e,!i.test(e)&&-1===n.indexOf(e),t,n,r)}var Je=/^[\n\r.]+<tr|^<tr/,Xe=/^[\n\r.]+<svg|^<path|^<g/;var Ye={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t,n){return void 0===t&&(t={}),function(e,t,n){var r="data",i=function(e,t,n,r){var i=0,o=[],a=e.match(/class="([^"]+|)\s{2}/g),s="";return a&&a.forEach((function(t){s=t.replace(/\s\s+/g," "),e=e.replace(t,s)})),e.replace(xe,"").replace(Be,"'$1'").replace(je,(function(e,a,s,l){var d=a.match(Ae);if(d){var c=d[1];if(ke.test(a))a='";} '+a.replace(d[1],c.replace(Ie,(function(e){return We(e=e.trim(),!Le.test(e)&&-1===o.indexOf(e),t,o,r)})))+'{ \n str = str + "';else if(De.test(a))a='"; '+a.replace(d[1],c.replace(Fe,(function(e){return $e(e,t,o,r)})))+'{ \n str = str + "';else if(Re.test(a)){var h=d[1].split(" of ");a='"; '+a.replace(d[1],(function(e){return o.push(h[0]),o.push(h[0]+"Index"),"var i"+(i+=1)+"=0; i"+i+" < "+We(h[1],!0,t,o,r)+".length; i"+i+"++"}))+"{ \n "+h[0]+"= "+We(h[1],!0,t,o,r)+"[i"+i+"]; \n var "+h[0]+"Index=i"+i+'; \n str = str + "'}else{var p=a.split("("),u=n&&n.hasOwnProperty(p[0])?"this.":"global";u=/\./.test(p[0])?"":u;var m=d[1].split(",");0===d[1].length||/data/.test(m[0])||/window./.test(m[0])||(d[1]="global"===u?"data."+d[1]:d[1]),Ue.test(a)&&/\]\./gm.test(a)||/@|\$|#/gm.test(a)?/@|\$|#|\]\./gm.test(a)&&(a='"+ '+("global"===u?"":u)+a.replace(d[1],c.replace(_e,(function(e){return $e(e,t,o,r)})))+'+ "'):a='" + '+("global"===u?"":u)+a.replace(c,We(d[1].replace(/,( |)data.|,/gi,",data.").replace(/,( |)data.window/gi,",window"),"global"!==u,t,o,r))+'+"'}}else Oe.test(a)?a='"; '+a.replace(Oe,'} else { \n str = str + "'):a.match(Pe)?a=a.replace(Pe,'"; \n } \n str = str + "'):/@|#|\$/gm.test(a)?(a.match(Ge)&&(a=Ke(a)),a='"+'+Ve(a,-1===o.indexOf(a),t,o)+'"]+"'):a=a.match(Ge)?'"+'+Ve(a=Ke(a),-1===o.indexOf(a),t,o)+'"]+"':'"+'+We(a.replace(/,/gi,"+data."),-1===o.indexOf(a),t,o,r)+'+"';return a}))}(e,r,t,n);return new Function(r,'var str="'+i+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);\n    if((str.match(valueRegEx)) && (str.match('svg') === null)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if((str.match(hrefRegex)) && (str.match('svg') === null)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}(e,t)},e}())).compile};function Ze(e,t){for(var n=getComputedStyle(e),r=[],i=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var a=getComputedStyle(o);"absolute"===n.position&&"static"===a.position||!i.test(a.overflow+a.overflowY+a.overflowX)||r.push(o),o=o.parentElement}return t||r.push(document),r}var Qe,et,tt="initial-load",nt="initial-end",rt="destroy",it="toolbar-refresh",ot="model-changed",at="keyUp",st="keyDown",lt="execCommandCallBack",dt="actionBegin",ct="actionComplete",ht="toolbarStatusUpdate",pt="updateToolbarItem",ut="delete",mt="sourceCode",ft="updateSource",gt="selection-save",vt="selection-restore",yt="editAreaClick",bt="selectAll",Ct="selectRange",Nt="getSelectedHtml",Et="paste-content",Mt="checkUndoStack",St="readOnlyMode",wt="xhtmlValidation",Tt="e-richtexteditor",xt="e-rtl",Lt="e-disabled",Dt="e-toolbar-item",kt="e-focused",Ot="e-imgbreak",Rt="e-imginline",Pt="e-expand-open",At="e-rte-readonly",Ht="e-rte-image",It="e-rte-drag-image",Bt="e-rte-table";!function(e){e[e.Toolbar=0]="Toolbar",e[e.Content=1]="Content",e[e.Popup=2]="Popup",e[e.LinkToolbar=3]="LinkToolbar",e[e.TextToolbar=4]="TextToolbar",e[e.ImageToolbar=5]="ImageToolbar",e[e.InlineToolbar=6]="InlineToolbar",e[e.TableToolbar=7]="TableToolbar"}(Qe||(Qe={})),function(e){e.Expand="Expand",e.MultiRow="MultiRow",e.Scrollable="Scrollable"}(et||(et={}));var Ft=function(){function e(e,t){this.parent=e,this.locator=t,this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.render=function(){this.parent,this.contentRenderer=this.renderer.getRenderer(Qe.Content),this.contentRenderer.renderPanel()},e.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"}),this.parent.notify(e.requestType+"-begin",e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ot,this.refresh,this),this.parent.on(at,this.keyUp,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ot,this.refresh),this.parent.off(at,this.keyUp))},e.prototype.keyUp=function(e){if("HTML"===this.parent.editorMode)switch(e.args.which){case 46:case 8:var t=this.parent.contentModule.getEditPanel().childNodes;if(0===t.length||1===t.length&&("BR"===t[0].tagName||"P"===t[0].tagName&&(0===t[0].childNodes.length||""===t[0].textContent))){var n=this.parent.contentModule.getEditPanel();n.innerHTML="<p><br/></p>",this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),n.childNodes[0],0)}}},e}(),jt="keydown",zt="action",Gt="format-type",qt="keydown-handler",_t="list-type",Ut="keyup-handler",Wt="keyup",Vt="model_changed_plugin",Kt="model_changed",$t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jt=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Xt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},Yt=function(e){function t(t,r){var i=e.call(this,r,t)||this;return i.keyPressHandler=function(e){for(var t=e.altKey,r=e.ctrlKey,o=e.shiftKey,a=e.which,s=0,l=Object.keys(i.keyConfigs);s<l.length;s++)for(var d=l[s],c=0,h=i.keyConfigs[d].split(",");c<h.length;c++){var p=h[c],u=n.getKeyConfigData(p.trim());t===u.altKey&&r===u.ctrlKey&&o===u.shiftKey&&a===u.keyCode&&(e.action=d)}i.keyAction&&i.keyAction(e)},i.bind(),i}var n;return $t(t,e),n=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),r={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?r.keyCode=Number(t[t.length-1]):r.keyCode=n.getKeyCode(t[t.length-1]),n.configCache[e]=r,r},t.getKeyCode=function(e){return Xt[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Jt([W({})],t.prototype,"keyConfigs",void 0),Jt([W("keyup")],t.prototype,"eventName",void 0),Jt([K()],t.prototype,"keyAction",void 0),n=Jt([$],t)}(ne),Zt=function(){function e(e,t){this.parent=e;var n=t;this.rendererFactory=n.getService("rendererFactory"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(mt,this.sourceCode,this),this.parent.on(nt,this.onInitialEnd,this),this.parent.on(ft,this.updateSourceCode,this)},e.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on(qt,this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.off(mt,this.sourceCode),this.parent.off(ft,this.updateSourceCode),this.parent.off(nt,this.onInitialEnd),this.parent.formatter.editorManager.observer.off(qt,this.onKeyDown)},e.prototype.getSourceCode=function(){return this.parent.createElement("textarea",{className:"e-rte-srctextarea"})},e.prototype.wireEvent=function(e){this.keyboardModule=new Yt(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),j.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},e.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&j.remove(this.previewElement,"mousedown",this.mouseDownHandler)},e.prototype.wireBaseKeyDown=function(){this.parent.keyboardModule=new Yt(this.contentModule.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},e.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},e.prototype.mouseDownHandler=function(e){this.parent.notify("sourceCodeMouseDown",{args:e})},e.prototype.previewKeyDown=function(e){switch(e.action){case"html-source":this.updateSourceCode(e),e.preventDefault();break;case"toolbar-focus":this.parent.toolbarSettings.enable&&this.parent.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}},e.prototype.onKeyDown=function(e){"html-source"===e.event.action&&(e.event.preventDefault(),this.sourceCode(e),e.callBack({requestType:"SourceCode",editorMode:"HTML",event:e.event}))},e.prototype.sourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger(dt,{requestType:"SourceCode",targetItem:"SourceCode",args:e});var t=S("."+Dt,this.parent.element);if(this.contentModule=this.rendererFactory.getRenderer(Qe.Content),this.parent.notify(pt,{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),s(this.previewElement)&&(this.previewElement=this.getSourceCode()),this.parent.updateValueData(),this.parent.iframeSettings.enable){var n=void 0;(n=s(this.parent.element.querySelector("#"+this.parent.element.id+"_source-view"))?this.parent.createElement("div",{className:"e-source-content",id:this.parent.element.id+"_source-view"}):this.parent.element.querySelector("#"+this.parent.element.id+"_source-view")).appendChild(this.previewElement),this.parent.element.appendChild(n),n.style.height=this.contentModule.getPanel().style.height,n.style.marginTop=this.contentModule.getPanel().style.marginTop,this.getPanel().value=this.getTextAreaValue(),this.contentModule.getPanel().style.display="none",n.style.display="block"}else this.contentModule.getPanel().appendChild(this.previewElement),this.getPanel().value=this.getTextAreaValue(),this.contentModule.getEditPanel().style.display="none",this.previewElement.style.display="block";this.parent.isBlur=!1,this.parent.disableToolbarItem(this.parent.toolbarSettings.items),this.parent.enableToolbarItem("SourceCode"),this.parent.getToolbar()&&g([this.parent.getToolbar()],[Pt]),g(t,["e-active"]),this.parent.setContentHeight("sourceCode",!0),this.wireEvent(this.previewElement),this.unWireBaseKeyDown(),this.previewElement.focus(),this.parent.updateValue(),s(this.parent.placeholder)||this.parent.iframeSettings.enable||(this.parent.element.querySelector(".rte-placeholder").style.display="none"),this.parent.trigger(ct,{requestType:"SourceCode",targetItem:"SourceCode",args:e}),this.parent.invokeChangeEvent()},e.prototype.updateSourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger(dt,{requestType:"Preview",targetItem:"Preview",args:e});var t=this.getPanel();this.parent.notify(pt,{targetItem:"Preview",updateItem:"SourceCode",baseToolbar:this.parent.getBaseToolbarObject()});var n=this.parent.serializeValue(t.value),r=null===n||""===n?"<p><br/></p>":n;this.parent.iframeSettings.enable?(t.parentElement.style.display="none",this.contentModule.getPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=r):(t.style.display="none",this.contentModule.getEditPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=r),this.parent.isBlur=!1,this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.parent.getToolbar()&&g([this.parent.getToolbar()],[Pt]),this.parent.setContentHeight("preview",!0),this.unWireEvent(),this.wireBaseKeyDown(),this.contentModule.getEditPanel().focus(),this.parent.updateValue(),s(this.parent.placeholder)||0!==this.contentModule.getEditPanel().innerText.length||(this.parent.element.querySelector(".rte-placeholder").style.display="block"),this.parent.trigger(ct,{requestType:"Preview",targetItem:"Preview",args:e}),this.parent.formatter.enableUndo(this.parent),this.parent.invokeChangeEvent()},e.prototype.getTextAreaValue=function(){return"<p><br></p>"===this.contentModule.getEditPanel().innerHTML||12===this.contentModule.getEditPanel().innerHTML.length||1===this.contentModule.getEditPanel().childNodes.length&&"P"===this.contentModule.getEditPanel().childNodes[0].tagName&&7===this.contentModule.getEditPanel().innerHTML.length?"":this.parent.value},e.prototype.getPanel=function(){return this.parent.element.querySelector(".e-rte-srctextarea")},e.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},e.prototype.destroy=function(){this.removeEventListener()},e}(),Qt={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}},en=function(){function e(){this.services={}}return e.prototype.register=function(e,t){s(this.services[e])&&(this.services[e]=t)},e.prototype.getService=function(e){if(s(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},e}(),tn=function(){function e(){this.rendererMap={}}return e.prototype.addRenderer=function(e,t){var n=i(Qe,e);s(this.rendererMap[n])&&(this.rendererMap[n]=t)},e.prototype.getRenderer=function(e){var t=i(Qe,e);if(s(this.rendererMap[t]))throw"The renderer "+t+" is not found";return this.rendererMap[t]},e}(),nn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(lt,this.commandCallBack,this),this.parent.on(rt,this.removeEventListener,this)},e.prototype.commandCallBack=function(e){"Undo"!==e.requestType&&"Redo"!==e.requestType&&this.parent.formatter.saveData(),this.parent.notify(it,{args:e}),this.parent.notify("count",{})},e.prototype.removeEventListener=function(){this.parent.off(lt,this.commandCallBack),this.parent.off(rt,this.removeEventListener)},e}(),rn=[{text:"Dashed Borders",cssClass:"e-dashed-borders",command:"Table",subCommand:"Dashed"},{text:"Alternate Rows",cssClass:"e-alternate-rows",command:"Table",subCommand:"Alternate"}],on=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),an=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},sn=["Bold","Italic","Underline","|","Formats","Alignments","OrderedList","UnorderedList","|","CreateLink","Image","|","SourceCode","Undo","Redo"],ln=[{text:"Segoe UI",value:"Segoe UI",cssClass:"e-segoe-ui"},{text:"Arial",value:"Arial,Helvetica,sans-serif",cssClass:"e-arial"},{text:"Georgia",value:"Georgia,serif",cssClass:"e-georgia"},{text:"Impact",value:"Impact,Charcoal,sans-serif",cssClass:"e-impact"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif",cssClass:"e-tahoma"},{text:"Times New Roman",value:"Times New Roman,Times,serif",cssClass:"e-times-new-roman"},{text:"Verdana",value:"Verdana,Geneva,sans-serif",cssClass:"e-verdana"}],dn=[{text:"8 pt",value:"8pt"},{text:"10 pt",value:"10pt"},{text:"12 pt",value:"12pt"},{text:"14 pt",value:"14pt"},{text:"18 pt",value:"18pt"},{text:"24 pt",value:"24pt"},{text:"36 pt",value:"36pt"}],cn=[{text:"Paragraph",value:"P",cssClass:"e-paragraph"},{text:"Code",value:"Pre",cssClass:"e-code"},{text:"Quotation",value:"BlockQuote",cssClass:"e-quote"},{text:"Heading 1",value:"H1",cssClass:"e-h1"},{text:"Heading 2",value:"H2",cssClass:"e-h2"},{text:"Heading 3",value:"H3",cssClass:"e-h3"},{text:"Heading 4",value:"H4",cssClass:"e-h4"}],hn={Custom:["","#000000","#e7e6e6","#44546a","#4472c4","#ed7d31","#a5a5a5","#ffc000","#70ad47","#ff0000","#f2f2f2","#808080","#cfcdcd","#d5dce4","#d9e2f3","#fbe4d5","#ededed","#fff2cc","#e2efd9","#ffcccc","#d9d9d9","#595959","#aeaaaa","#acb9ca","#b4c6e7","#f7caac","#dbdbdb","#ffe599","#c5e0b3","#ff8080","#bfbfbf","#404040","#747070","#8496b0","#8eaadb","#f4b083","#c9c9c9","#ffd966","#a8d08d","#ff3333","#a6a6a6","#262626","#3b3838","#323e4f","#2f5496","#c45911","#7b7b7b","#bf8f00","#538135","#b30000","#7f7f7f","#0d0d0d","#161616","#212934","#1f3763","#823b0b","#525252","#7f5f00","#375623","#660000"]},pn={Custom:["","#000000","#ffff00","#00ff00","#00ffff","#0000ff","#ff0000","#000080","#800080","#996633","#f2f2f2","#808080","#ffffcc","#b3ffb3","#ccffff","#ccccff","#ffcccc","#ccccff","#ff80ff","#f2e6d9","#d9d9d9","#595959","#ffff80","#80ff80","#b3ffff","#8080ff","#ff8080","#8080ff","#ff00ff","#dfbf9f","#bfbfbf","#404040","#ffff33","#33ff33","#33ffff","#3333ff","#ff3333","#0000b3","#b300b3","#c68c53","#a6a6a6","#262626","#e6e600","#00b300","#009999","#000099","#b30000","#000066","#660066","#86592d","#7f7f7f","#0d0d0d","#999900","#006600","#006666","#000066","#660000","#00004d","#4d004d","#734d26"]},un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W(!0)],t.prototype,"enable",void 0),an([W(!0)],t.prototype,"enableFloating",void 0),an([W(et.Expand)],t.prototype,"type",void 0),an([W(sn)],t.prototype,"items",void 0),an([W({})],t.prototype,"itemConfigs",void 0),t}(re),mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W([".jpeg",".jpg",".png"])],t.prototype,"allowedTypes",void 0),an([W("inline")],t.prototype,"display",void 0),an([W("Blob")],t.prototype,"saveFormat",void 0),an([W("auto")],t.prototype,"width",void 0),an([W("auto")],t.prototype,"height",void 0),an([W(null)],t.prototype,"saveUrl",void 0),an([W(null)],t.prototype,"path",void 0),an([W(!0)],t.prototype,"resize",void 0),an([W(0)],t.prototype,"minWidth",void 0),an([W(null)],t.prototype,"maxWidth",void 0),an([W(0)],t.prototype,"minHeight",void 0),an([W(null)],t.prototype,"maxHeight",void 0),an([W(!1)],t.prototype,"resizeByPercent",void 0),t}(re),fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W("100%")],t.prototype,"width",void 0),an([W(rn)],t.prototype,"styles",void 0),an([W(!0)],t.prototype,"resize",void 0),an([W(0)],t.prototype,"minWidth",void 0),an([W(null)],t.prototype,"maxWidth",void 0),t}(re),gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W(!0)],t.prototype,"enable",void 0),an([W(!1)],t.prototype,"showOnRightClick",void 0),an([W("hide")],t.prototype,"actionOnScroll",void 0),an([W(["Open","Edit","UnLink"])],t.prototype,"link",void 0),an([W(["Replace","Align","Caption","Remove","-","InsertLink","OpenImageLink","EditImageLink","RemoveImageLink","Display","AltText","Dimension"])],t.prototype,"image",void 0),an([W(["Cut","Copy","Paste"])],t.prototype,"text",void 0),an([W(["TableHeader","TableRows","TableColumns","BackgroundColor","-","TableRemove","Alignments","TableCellVerticalAlign","Styles"])],t.prototype,"table",void 0),t}(re),vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W(!1)],t.prototype,"prompt",void 0),an([W(null)],t.prototype,"deniedAttrs",void 0),an([W(["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-family","font-size","font-weight","font-style","height","left","line-height","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","position","right","table-layout","text-align","text-decoration","text-indent","top","vertical-align","visibility","white-space","width"])],t.prototype,"allowedStyleProps",void 0),an([W(null)],t.prototype,"deniedTags",void 0),an([W(!0)],t.prototype,"keepFormat",void 0),an([W(!1)],t.prototype,"plainText",void 0),t}(re),yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W(null)],t.prototype,"default",void 0),an([W("65px")],t.prototype,"width",void 0),an([W(ln)],t.prototype,"items",void 0),t}(re),bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W(null)],t.prototype,"default",void 0),an([W("35px")],t.prototype,"width",void 0),an([W(dn)],t.prototype,"items",void 0),t}(re),Cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W(null)],t.prototype,"default",void 0),an([W("65px")],t.prototype,"width",void 0),an([W(cn)],t.prototype,"types",void 0),t}(re),Nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W("#ff0000")],t.prototype,"default",void 0),an([W("Palette")],t.prototype,"mode",void 0),an([W(10)],t.prototype,"columns",void 0),an([W(hn)],t.prototype,"colorCode",void 0),an([W(!1)],t.prototype,"modeSwitcher",void 0),t}(re),En=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),an([W("#ffff00")],t.prototype,"default",void 0),an([W("Palette")],t.prototype,"mode",void 0),an([W(10)],t.prototype,"columns",void 0),an([W(pn)],t.prototype,"colorCode",void 0),an([W(!1)],t.prototype,"modeSwitcher",void 0),t}(re),Mn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sn=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mn(t,e),Sn([W([])],t.prototype,"styles",void 0),Sn([W([])],t.prototype,"scripts",void 0),t}(re),Tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mn(t,e),Sn([W(!1)],t.prototype,"enable",void 0),Sn([W(null)],t.prototype,"attributes",void 0),Sn([V({},wn)],t.prototype,"resources",void 0),t}(re),xn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ln=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xn(t,e),Ln([W(!1)],t.prototype,"enable",void 0),Ln([W(!0)],t.prototype,"onSelection",void 0),t}(re);function kn(e,t,n,r){var i;if(i=n?t.contentModule.getDocument().querySelector("body"):t.element,Object.keys(e).length)for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];"class"===s?i.classList.add(e[s]):"disabled"===s&&"disabled"===e[s]?(t.enabled=!1,t.setEnable()):"readonly"===s&&"readonly"===e[s]?(t.readonly=!0,t.setReadOnly(r)):"style"===s?i.setAttribute("style",e[s]):"tabindex"===s?t.inputElement.setAttribute("tabindex",e[s]):"placeholder"===s?(t.placeholder=e[s],t.setPlaceHolder()):["name","required"].indexOf(s)>-1?t.valueContainer.setAttribute(s,e[s]):i.setAttribute(s,e[s])}}var On=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Rn=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Pn=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],An=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:On,attributes:Rn}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var n=this.wrapElement.innerHTML;return this.removeElement(),n},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var n=e[t].attributes,r=0;r<n.length;r++)this.wrapElement.children[t].removeAttribute(n[r].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){N(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+Pn.join("],[")+"]");e.length>0&&e.forEach((function(e){Pn.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,n){var r=e.wrapElement.querySelectorAll(t.selector);r.length>0&&r.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}(),Hn=["Undo","Redo"],In=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function Bn(){var e=!1;return F.isDevice&&F.isIos&&(e=!0),e}function Fn(e,t){for(var n,r=0,i=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if("Separator"!==t[i].type){if("OrderedList"===e[r]&&"OL"===t[i].subCommand){n.push(i);break}if("UnorderedList"===e[r]&&"UL"===t[i].subCommand){n.push(i);break}if("InsertCode"===e[r]&&"Pre"===t[i].subCommand){n.push(i);break}if(e[r]===t[i].subCommand){n.push(i);break}}return n}("object"==typeof(n=Hn)?n:[n],e.toolbarObj.items),o=S("."+Dt,e.toolbarObj.element),a=0,s=Object.keys(t);a<s.length;a++){var l=s[a],d=o[i[r]];d&&e.toolbarObj.enableItems(d,t[l]),r++}}function jn(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}function zn(e,t){var n=[];for(t=t.firstChild;t;t=t.nextSibling)3===t.nodeType?n.push(t):n=n.concat(zn(e,t));return n}function Gn(e,t){var n;return null!==e&&""!==e?(n=t.enableHtmlEncode?qn(Un(e)):qn(e),t.setProperties({value:n},!0)):n=t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",n}function qn(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var n=document.createElement("div");if(t.childNodes.length>0){for(var r=void 0,i=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||In.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(r?i.appendChild(t.firstChild):(o=m("p"),n.appendChild(o),o.appendChild(t.firstChild)),i=o,r=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?N(t.firstChild):(n.appendChild(t.firstChild),r=!1);for(var a=n.querySelectorAll("img"),s=0;s<a.length;s++)a[s].classList.contains(Ht)||a[s].classList.add(Ht),a[s].classList.contains(Rt)||a[s].classList.contains(Ot)||a[s].classList.add(Rt)}return n.innerHTML}function _n(e){return"<p><br></p>"===e||"&lt;p&gt;&lt;br&gt;&lt;/p&gt;"===e||""===e}function Un(e){return e.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}var Wn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vn=function(){return Vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Vn.apply(this,arguments)},Kn=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$n=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.defaultResetValue=null,r.keyUpAction=!1,r.isFocusOut=!1,r.isRTE=!1,r.isBlur=!0,r.needsID=!0,r}return Wn(t,e),t.prototype.requiredModules=function(){var e=[];return e.push({member:"image",args:[this,this.serviceLocator]}),this.showCharCount&&e.push({member:"count",args:[this,this.serviceLocator]}),"HTML"===this.editorMode&&(e.push({member:"htmlEditor",args:[this,this.serviceLocator]}),e.push({member:"pasteCleanup",args:[this,this.serviceLocator]})),e},t.prototype.updateEnable=function(){this.enabled?(g([this.element],Lt),this.element.setAttribute("aria-disabled","false"),s(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(f([this.element],Lt),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.eventInitializer():this.unWireEvents()},t.prototype.preRender=function(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this),this.clickPoints={clientX:0,clientY:0},this.initialValue=this.value,this.serviceLocator=new en,this.initializeServices(),this.setContainer(),this.persistData(),x(this.element,{width:h(this.width)}),E(this.element,{role:"application"})},t.prototype.persistData=function(){},t.prototype.setContainer=function(){this.originalElement=this.element.cloneNode(!0),null!==this.value&&null===this.valueTemplate||this.setValue(),this.element.hasAttribute("tabindex")&&(this.htmlAttributes={tabindex:this.element.getAttribute("tabindex")},this.element.removeAttribute("tabindex")),this.isBlazor()||(this.element.innerHTML="");for(var e=["class","style","id","ejs-for"],t={},n=0;n<this.element.attributes.length;n++)-1!==e.indexOf(this.element.attributes[n].name)||/^data-val/.test(this.element.attributes[n].name)||(t[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));a(t,this.htmlAttributes,t),this.setProperties({htmlAttributes:t},!0),s(this.htmlAttributes.id)||(this.element.id=this.htmlAttributes.id),"TEXTAREA"===this.element.tagName||(this.valueContainer=this.createElement("textarea",{id:this.getID()+"-value"})),this.valueContainer.name=this.getID(),f([this.valueContainer],"e-rte-hidden"),this.element.appendChild(this.valueContainer)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.selectAll=function(){this.notify(bt,{})},t.prototype.selectRange=function(e){this.notify(Ct,{range:e})},t.prototype.getSelection=function(){var e="";return this.notify(Nt,{callBack:function(t){e=t}}),e},t.prototype.executeCommand=function(e,t,n){if(t=this.htmlPurifier(e,t),"HTML"===this.editorMode){var r=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(this.iframeSettings.enable&&r.startContainer===this.inputElement||!this.inputElement.contains(r.startContainer))&&this.focusIn()}var i=Qt[e];n&&n.undo&&n.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(i.command,i.subCommand?i.subCommand:t||i.value,null,null,t||i.value,t||i.value),n&&n.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.contentChanged()},t.prototype.htmlPurifier=function(e,t){if("HTML"===this.editorMode)switch(e){case"insertHTML":this.enableHtmlSanitizer&&(t="string"==typeof t?this.htmlEditorModule.sanitizeHelper(t):this.htmlEditorModule.sanitizeHelper(t.outerHTML));break;case"insertTable":s(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});break;case"insertImage":var n=this.createElement("img",{attrs:{src:t.url}}),r=n.outerHTML;this.enableHtmlSanitizer&&(r=this.htmlEditorModule.sanitizeHelper(n.outerHTML));var i=""!==r&&this.createElement("div",{innerHTML:r}).firstElementChild.getAttribute("src")||null;i=s(i)?"":i,t.url=i,s(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),s(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});break;case"createLink":var o=this.createElement("a",{attrs:{href:t.url}}),a=o.outerHTML;this.enableHtmlSanitizer&&(a=this.htmlEditorModule.sanitizeHelper(o.outerHTML));var l=""!==a&&this.createElement("div",{innerHTML:a}).firstElementChild.getAttribute("href")||null;l=s(l)?"":l,t.url=l}return t},t.prototype.encode=function(e){var t=this.createElement("div");return t.innerText=e.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},t.prototype.render=function(){this.value&&!this.valueTemplate&&this.setProperties({value:this.serializeValue(this.value)},!0),this.renderModule=new Ft(this,this.serviceLocator),this.sourceCodeModule=new Zt(this,this.serviceLocator),this.notify(tt,{}),this.trigger("load"),this.RTERender(),new nn(this),this.notify(nt,{}),this.setContentHeight(),null!==this.value&&(this.isBlazor()?this.defaultResetValue=this.value:this.valueContainer.defaultValue=this.value),this.enabled?this.eventInitializer():this.unWireEvents(),this.renderComplete()},t.prototype.eventInitializer=function(){this.wireEvents()},t.prototype.keyDown=function(e){if(this.notify(st,{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var t=this.getRange();if(T("#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer,"pre")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){var n=new RegExp(String.fromCharCode(8203),"g"),r=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(n,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,r)}}0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==e.action&&(e.action&&"paste"!==e.action||9===e.which)&&(this.formatter.process(this,null,e),"escape"===e.action)&&this.contentModule.getEditPanel().focus(),s(this.placeholder)||this.setPlaceHolder(),this.autoResize()},t.prototype.keyUp=function(e){this.notify(at,{member:"keyup",args:e});var t=32===e.which||13===e.which||8===e.which||46===e.which;("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),this.inputElement&&0!==this.inputElement.textContent.length&&this.notify(it,{args:e}),s(this.placeholder)||this.setPlaceHolder()},t.prototype.serializeValue=function(e){return"HTML"!==this.editorMode||s(e)||(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(Un(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.updateValue=function(e){if(s(e)){var t=this.inputElement.innerHTML;this.setProperties({value:_n(t)?null:t})}else this.setProperties({value:e})},t.prototype.triggerEditArea=function(e){if(Bn()){var t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.notify(yt,{member:"editAreaClick",args:e})}else this.notify(yt,{member:"editAreaClick",args:e})},t.prototype.notifyMouseUp=function(e){var t=e.touches?e.changedTouches[0]:e;this.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.notify(it,{args:e}),this.triggerEditArea(e)},t.prototype.mouseUp=function(e){this.notifyMouseUp(e)},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.onCopy=function(){this.contentModule.getDocument().execCommand("copy",!1,null)},t.prototype.onCut=function(){this.contentModule.getDocument().execCommand("cut",!1,null)},t.prototype.onPaste=function(e){var t=this,n={originalEvent:e,cancel:!1,requestType:"Paste"};this.trigger(dt,n,(function(n){var r=t.getText().length-t.getSelection().length+(s(e)||s(e.clipboardData)?0:e.clipboardData.getData("text/plain").length);if(!n.cancel&&(-1===t.maxLength||r<t.maxLength))if(s(t.pasteCleanupModule)){var i={requestType:"Paste",editorMode:t.editorMode,event:e},o=null;e&&!s(e.clipboardData)&&(o=e.clipboardData.getData("text/plain"));var a=e&&e.clipboardData&&e.clipboardData.items.length>0?e.clipboardData.items[0].getAsFile():null;null!==o&&t.notify(Et,{file:a,args:e,text:o}),setTimeout((function(){t.formatter.onSuccess(t,i)}),0)}else t.notify("pasteClean",{args:e});else e.preventDefault()}))},t.prototype.clipboardAction=function(e,t){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}},t.prototype.destroy=function(){this.isDestroyed||this.isRendered&&(this.notify(rt,{}),this.destroyDependentModules(),s(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),this.unWireEvents(),"TEXTAREA"===this.originalElement.tagName||(""!==this.originalElement.innerHTML.trim()?(this.element.innerHTML=this.originalElement.innerHTML.trim(),this.setProperties({value:s(this.initialValue)?null:this.initialValue},!0)):this.element.innerHTML=""),this.placeholder&&this.placeHolderWrapper&&(this.placeHolderWrapper=null),s(this.cssClass)||g([this.element],this.cssClass),this.removeHtmlAttributes(),this.removeAttributes(),e.prototype.destroy.call(this),this.isRendered=!1,this.enablePersistence&&window.localStorage.removeItem(this.getModuleName()+this.element.id))},t.prototype.removeHtmlAttributes=function(){if(this.htmlAttributes)for(var e=Object.keys(this.htmlAttributes),t=0;t<e.length&&this.element.hasAttribute(e[t]);t++)this.element.removeAttribute(e[t])},t.prototype.removeAttributes=function(){this.enabled||g([this.element],Lt),this.enableRtl&&g([this.element],xt),this.readonly&&g([this.element],At),""!==this.element.style.width&&""===this.originalElement.style.width&&this.element.style.removeProperty("width"),""!==this.element.style.height&&""===this.originalElement.style.height&&this.element.style.removeProperty("height"),this.element.removeAttribute("aria-disabled"),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex")},t.prototype.destroyDependentModules=function(){this.renderModule.destroy(),this.formatter.editorManager.undoRedoManager.destroy(),this.sourceCodeModule.destroy()},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.getText=function(){return this.contentModule.getText()},t.prototype.getSelectedHtml=function(){var e=this.createElement("div"),t=this.contentModule.getDocument().getSelection();if(t.rangeCount>0){var n=t.getRangeAt(0).cloneContents();e.appendChild(n)}return e.innerHTML},t.prototype.getModuleName=function(){return"richtexteditor"},t.prototype.onPropertyChanged=function(t,n){for(var r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];switch(o){case"value":var a,l=t[o];a="HTML"===this.editorMode?Gn(l,this):l,s(l)||""===l||(this.value=this.serializeValue(this.enableHtmlEncode?this.encode(Un(a)):a)),this.updatePanelValue(),this.setPlaceHolder(),this.notify(wt,{module:"XhtmlValidation",newProp:t,oldProp:n}),this.showCharCount&&this.countModule.refresh();break;case"valueTemplate":this.setValue(),this.showCharCount&&this.countModule.refresh();break;case"width":this.setWidth(t[o]),this.toolbarSettings.enable&&(this.toolbarModule.refreshToolbarOverflow(),this.resizeHandler());break;case"height":this.setHeight(t[o]),this.setContentHeight(),this.autoResize();break;case"readonly":this.setReadOnly(!1);break;case"cssClass":this.element.classList.remove(n[o]),this.setCssClass(t[o]);break;case"enabled":this.setEnable();break;case"enableRtl":this.updateRTL();break;case"placeholder":this.placeholder=t[o],this.setPlaceHolder();break;case"htmlAttributes":kn(this.htmlAttributes,this,!1,!1);break;case"locale":e.prototype.refresh.call(this);break;case"maxLength":this.showCharCount&&this.countModule.refresh();break;case"showCharCount":t[o]&&this.countModule?this.countModule.renderCount():!1===t[o]&&this.countModule&&this.countModule.destroy();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify(Kt,{newProp:t,oldProp:n});break;case"enableXhtml":this.notify(wt,{module:"XhtmlValidation",newProp:t,oldProp:n});break;default:this.notify(ot,{newProp:t,oldProp:n})}}},t.prototype.updateValueData=function(){this.enableHtmlEncode?this.setProperties({value:this.encode(Un(this.inputElement.innerHTML))},!0):this.setProperties({value:/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:Un(this.inputElement.innerHTML)})},t.prototype.removeSheets=function(e){var t;for(t=0;t<e.length;t++)N(e[t])},t.prototype.updatePanelValue=function(){var e=this.value;(e=this.enableHtmlEncode&&this.value?Un(e):e)?(this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.trim()!==e.trim()&&(this.inputElement.innerHTML=e)):("HTML"===this.editorMode?this.inputElement.innerHTML="<p><br/></p>":this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule.refresh()},t.prototype.setHeight=function(e){this.element.style.height="auto"!==e?h(e):"auto"},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderWrapper||(this.placeHolderWrapper=this.createElement("span",{className:"rte-placeholder"}),this.inputElement&&this.inputElement.parentElement.insertBefore(this.placeHolderWrapper,this.inputElement),E(this.placeHolderWrapper,{style:"font-size: 16px; padding: 16px; margin-left: 0px; margin-right: 0px;"})),this.placeHolderWrapper.innerHTML=this.placeholder,0!==this.inputElement.textContent.length||s(this.inputElement.firstChild)||"P"!==this.inputElement.firstChild.nodeName||s(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName?this.placeHolderWrapper.style.display="none":this.placeHolderWrapper.style.display="block"):this.inputElement.setAttribute("placeholder",this.placeholder))},t.prototype.setWidth=function(e){"auto"!==e?x(this.element,{width:h(this.width)}):this.element.style.width="auto"},t.prototype.setCssClass=function(e){s(e)||this.element.classList.add(e)},t.prototype.updateRTL=function(){this.notify("rtl-mode",{enableRtl:this.enableRtl}),this.enableRtl?this.element.classList.add(xt):this.element.classList.remove(xt)},t.prototype.updateReadOnly=function(){this.notify(St,{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unbindEvents():this.enabled&&this.bindEvents())},t.prototype.print=function(){var e,t=this,n={element:this.inputElement,requestType:"print",cancel:!1};this.trigger(dt,n,(function(n){e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===F.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=function(e,t){var n=document.createElement("div"),r=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),i=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(i.length)for(var o=0,a=i.length;o<a;o++)r.push(i[o]);var l="";s(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),n.appendChild(e.cloneNode(!0));var d=0;for(a=r.length;d<a;d++)l+=r[d].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+l+"</head><body>"+n.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var c=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(c))}),500);return t}(t.inputElement,e),n.cancel||t.trigger(ct,{requestType:"print"})}))},t.prototype.refreshUI=function(){this.renderModule.refresh()},t.prototype.showFullScreen=function(){this.readonly||this.fullScreenModule.showFullScreen()},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument())},t.prototype.initializeServices=function(){this.serviceLocator.register("rendererFactory",new tn)},t.prototype.RTERender=function(){var e=this.serviceLocator.getService("rendererFactory");this.contentModule=e.getRenderer(Qe.Content),this.renderModule.render(),this.inputElement=this.contentModule.getEditPanel(),this.setHeight(this.height),kn(this.htmlAttributes,this,!1,!0),this.setCssClass(this.cssClass),this.updateEnable(),this.setPlaceHolder(),this.updateRTL(),this.updateReadOnly(),this.updatePanelValue(),this.enableHtmlEncode&&!s(this.value)&&this.setProperties({value:this.encode(Un(this.value))})},t.prototype.setIframeSettings=function(){},t.prototype.isBlazor=function(){return!1},t.prototype.setValue=function(){if(this.valueTemplate)if("string"==typeof this.valueTemplate)this.setProperties({value:this.valueTemplate});else{for(var e=function(e,t,n){var r=Ye.compile(e,t,n);return function(e,t,n,i,o,a,s){var l=r(e,t,n,s);return"string"==typeof l?Xe.test(l)?m("svg",{innerHTML:l}).childNodes:m(Je.test(l)?"table":"div",{innerHTML:l}).childNodes:l}}(this.valueTemplate)({}),t=0;t<e.length;t++)b([e[t]],this.element);this.setProperties({value:this.element.innerHTML.trim()})}else{var n=!s(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\/?|\!?)(!--!--)>/g,"").trim();""!==n&&("TEXTAREA"===this.element.tagName?this.setProperties({value:Un(n)}):this.setProperties({value:n}))}},t.prototype.setContentHeight=function(e,t){var n,r,i,o=0,a=this.sourceCodeModule.getPanel()&&"block"===this.sourceCodeModule.getPanel().parentElement.style.display?this.sourceCodeModule.getPanel().parentElement:this.contentModule.getPanel(),s=this.element.offsetHeight;0!==this.element.offsetHeight||"auto"===this.height||this.getToolbar()||(s=parseInt(this.height,10),(i="string"==typeof this.height&&this.height.indexOf("%")>-1)&&(r=this.height));var l=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,d=this.enableResize?this.element.querySelector(".e-resize-handle").offsetHeight+8:0,c=this.getToolbar()?this.toolbarModule.getExpandTBarPopHeight():0;this.toolbarSettings.type===et.Expand&&t&&"preview"!==e?(n="auto"===this.height&&0===d?"auto":s-(l+c+d)+"px",o=this.toolbarSettings.enableFloating?0:c):n="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")?i?r:s-(l+d)+"px":"auto",x(a,{height:n,marginTop:o+"px"}),this.iframeSettings.enable&&"sourceCode"===e&&x(M(".e-rte-content",this.element),{height:n,marginTop:o+"px"}),this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable&&x(this.getToolbar().parentElement,t?{height:l+c+"px"}:{height:l+"px"}),0===d&&this.autoResize()},t.prototype.getHtml=function(){return this.value},t.prototype.showSourceCode=function(){this.readonly||this.notify(mt,{})},t.prototype.getCharCount=function(){return("Markdown"===this.editorMode?this.inputElement.value.trim():this.inputElement.textContent.trim()).length},t.prototype.getBaseToolbarObject=function(){},t.prototype.getToolbar=function(){return this.toolbarModule?this.toolbarModule.getToolbarElement():null},t.prototype.getToolbarElement=function(){return this.toolbarModule&&this.toolbarModule.getToolbarElement()},t.prototype.getID=function(){return"TEXTAREA"===this.originalElement.tagName?this.valueContainer.id:this.element.id},t.prototype.mouseDownHandler=function(e){var t=e.touches?e.changedTouches[0]:e;f([this.element],[kt]),this.preventDefaultResize(e),this.notify("mouseDown",{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}},t.prototype.preventImgResize=function(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.preventDefaultResize=function(e){"msie"===F.info.name?this.contentModule.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize):"mozilla"===F.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!1,"false"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!1,"false"))},t.prototype.defaultResize=function(e){"msie"===F.info.name?this.contentModule.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):"mozilla"===F.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!0,"true"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!0,"true"))},t.prototype.resizeHandler=function(){this.setContentHeight("",!1)},t.prototype.scrollHandler=function(e){this.notify("scroll",{args:e})},t.prototype.contentScrollHandler=function(e){this.notify("contentscroll",{args:e})},t.prototype.focusHandler=function(e){this.isRTE&&!this.isFocusOut||(this.isRTE=!this.isFocusOut,this.isFocusOut=!1,f([this.element],[kt]),"HTML"===this.editorMode?this.cloneValue="<p><br></p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(Un(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=""===this.inputElement.value?null:this.inputElement.value,document.activeElement,this.preventDefaultResize(e),this.trigger("focus",{event:e,isInteracted:0!==Object.keys(e).length}),j.add(document,"mousedown",this.onDocumentClick,this))},t.prototype.getUpdatedValue=function(){return"HTML"===this.editorMode?"<p><br></p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(Un(this.inputElement.innerHTML)):this.inputElement.innerHTML:""===this.inputElement.value?null:this.inputElement.value},t.prototype.updateValueOnIdle=function(){this.setProperties({value:this.getUpdatedValue()},!0),this.valueContainer.value=this.value,this.invokeChangeEvent()},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.contentChanged=function(){!s(this.saveInterval)&&this.saveInterval>0&&(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval))},t.prototype.onDocumentClick=function(e){var t=e.target,n=T(t,"."+Tt);this.element.contains(e.target)||document===e.target||n===this.element||T(t,'[aria-owns="'+this.getID()+'"]')||(this.isBlur=!0,this.isRTE=!1),this.notify("docClick",{args:e})},t.prototype.blurHandler=function(e){var t=e.relatedTarget;if(t){var n=T(t,"."+Tt);n&&n===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):T(t,'[aria-owns="'+this.getID()+'"]')?this.isBlur=!1:(this.isBlur=!0,t=null)}if(this.isBlur&&s(t)){g([this.element],[kt]),this.notify("focusChange",{});var r=this.getUpdatedValue();this.setProperties({value:r}),this.notify(it,{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,jn(this.valueContainer,"focusout"),this.defaultResize(e),this.trigger("blur",{event:e,isInteracted:0!==Object.keys(e).length}),s(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),j.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0},t.prototype.invokeChangeEvent=function(){var e={value:this.value};this.value!==this.cloneValue&&(this.trigger("change",e),this.cloneValue=this.value)},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=Ze(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var n=t[e];j.add(n,"scroll",this.scrollHandler,this)}},t.prototype.wireContextEvent=function(){},t.prototype.unWireContextEvent=function(){},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=Ze(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var n=t[e];j.remove(n,"scroll",this.scrollHandler)}},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim();this.setProperties({value:""===e?null:this.isBlazor()?this.defaultResetValue:e})},t.prototype.autoResize=function(){"auto"===this.height||(this.inputElement.style.overflow=null)},t.prototype.setAutoHeight=function(e){s(e)||(e.style.height="",e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")},t.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.readonly&&this.enabled||this.bindEvents()},t.prototype.restrict=function(e){if(this.maxLength>=0){for(var t="Markdown"===this.editorMode?this.contentModule.getText():e.currentTarget.textContent.trim(),n=[8,16,17,37,38,39,40,46,65],r=void 0,i=0;i<=n.length-1;i++)if(e.which===n[i]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(r=n[i])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==r&&e.preventDefault()}},t.prototype.bindEvents=function(){this.keyboardModule=new Yt(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:Vn({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=T(this.valueContainer,"form");e&&j.add(e,"reset",this.resetHandler,this),j.add(this.inputElement,"keyup",this.keyUp,this),j.add(this.inputElement,"paste",this.onPaste,this),j.add(this.inputElement,F.touchEndEvent,d(this.mouseUp,30),this),j.add(this.inputElement,F.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on(qt,this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.wireScrollElementsEvents()},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.notify("iframe-click",e)},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}!e.callBack||"copy"!==e.event.action&&"cut"!==e.event.action&&"delete"!==e.event.action||e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.readonly&&this.enabled||this.unbindEvents()},t.prototype.unbindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=T(this.valueContainer,"form");e&&j.remove(e,"reset",this.resetHandler),j.remove(this.inputElement,"keyup",this.keyUp),j.remove(this.inputElement,"paste",this.onPaste),j.remove(this.inputElement,F.touchEndEvent,d(this.mouseUp,30)),j.remove(this.inputElement,F.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off(qt,this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.unWireScrollElementsEvents()},Kn([V({},un)],t.prototype,"toolbarSettings",void 0),Kn([V({},gn)],t.prototype,"quickToolbarSettings",void 0),Kn([V({},vn)],t.prototype,"pasteCleanupSettings",void 0),Kn([V({},Tn)],t.prototype,"iframeSettings",void 0),Kn([V({},mn)],t.prototype,"insertImageSettings",void 0),Kn([V({},fn)],t.prototype,"tableSettings",void 0),Kn([W(0)],t.prototype,"floatingToolbarOffset",void 0),Kn([V({},Dn)],t.prototype,"inlineMode",void 0),Kn([W("100%")],t.prototype,"width",void 0),Kn([W(!1)],t.prototype,"enablePersistence",void 0),Kn([W(!1)],t.prototype,"enableResize",void 0),Kn([W({})],t.prototype,"htmlAttributes",void 0),Kn([W(null)],t.prototype,"placeholder",void 0),Kn([W(!1)],t.prototype,"readonly",void 0),Kn([W(!0)],t.prototype,"enabled",void 0),Kn([W(!0)],t.prototype,"enableHtmlSanitizer",void 0),Kn([W(!1)],t.prototype,"enableHtmlEncode",void 0),Kn([W(!1)],t.prototype,"enableXhtml",void 0),Kn([W("auto")],t.prototype,"height",void 0),Kn([W(null)],t.prototype,"cssClass",void 0),Kn([W(null)],t.prototype,"value",void 0),Kn([W(30)],t.prototype,"undoRedoSteps",void 0),Kn([W(300)],t.prototype,"undoRedoTimer",void 0),Kn([W("HTML")],t.prototype,"editorMode",void 0),Kn([W(null)],t.prototype,"keyConfig",void 0),Kn([W(!1)],t.prototype,"showCharCount",void 0),Kn([W(!1)],t.prototype,"enableTabKey",void 0),Kn([W(!1)],t.prototype,"enableAutoUrl",void 0),Kn([W(-1)],t.prototype,"maxLength",void 0),Kn([V({},Cn)],t.prototype,"format",void 0),Kn([V({},yn)],t.prototype,"fontFamily",void 0),Kn([V({},bn)],t.prototype,"fontSize",void 0),Kn([V({},Nn)],t.prototype,"fontColor",void 0),Kn([V({},En)],t.prototype,"backgroundColor",void 0),Kn([W(null)],t.prototype,"valueTemplate",void 0),Kn([W(1e4)],t.prototype,"saveInterval",void 0),Kn([W(1)],t.prototype,"saveIdleOnKeyPress",void 0),Kn([K()],t.prototype,"actionBegin",void 0),Kn([K()],t.prototype,"actionComplete",void 0),Kn([K()],t.prototype,"beforeDialogOpen",void 0),Kn([K()],t.prototype,"dialogOpen",void 0),Kn([K()],t.prototype,"dialogClose",void 0),Kn([K()],t.prototype,"beforeQuickToolbarOpen",void 0),Kn([K()],t.prototype,"quickToolbarOpen",void 0),Kn([K()],t.prototype,"quickToolbarClose",void 0),Kn([K()],t.prototype,"toolbarStatusUpdate",void 0),Kn([K()],t.prototype,"imageSelected",void 0),Kn([K()],t.prototype,"imageUploading",void 0),Kn([K()],t.prototype,"imageUploadSuccess",void 0),Kn([K()],t.prototype,"imageUploadFailed",void 0),Kn([K()],t.prototype,"imageRemoving",void 0),Kn([K()],t.prototype,"afterImageDelete",void 0),Kn([K()],t.prototype,"created",void 0),Kn([K()],t.prototype,"destroyed",void 0),Kn([K()],t.prototype,"beforeSanitizeHtml",void 0),Kn([K()],t.prototype,"blur",void 0),Kn([K()],t.prototype,"toolbarClick",void 0),Kn([K()],t.prototype,"focus",void 0),Kn([K()],t.prototype,"change",void 0),Kn([K()],t.prototype,"resizing",void 0),Kn([K()],t.prototype,"resizeStart",void 0),Kn([K()],t.prototype,"resizeStop",void 0),Kn([W(null)],t.prototype,"formatter",void 0),Kn([$],t)}(Te),Jn=function(){function e(){}return e.prototype.process=function(e,t,n,r){var i,o=this,l=e.contentModule.getDocument().getSelection(),d=l.rangeCount>0?l.getRangeAt(l.rangeCount-1):null;if("HTML"===e.editorMode&&(i=this.editorManager.nodeSelection.save(d,e.contentModule.getDocument())),s(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||!d||e.contentModule.getEditPanel().contains(this.getAncestorNode(d.commonAncestorContainer))||e.contentModule.getEditPanel()===d.commonAncestorContainer||e.contentModule.getPanel()===d.commonAncestorContainer){if(s(t)){var c=n.action;if("tab"!==c&&"enter"!==c&&"space"!==c&&"escape"!==c){t={},"Markdown"===e.editorMode&&"insert-table"===c&&(r={headingText:e.localeObj.getConstant("TableHeadingText"),colText:e.localeObj.getConstant("TableColText")});var h={originalEvent:n,cancel:!1,requestType:c||n.key+"Key",itemCollection:r};a(t,t,h,!0),e.trigger(dt,t,(function(e){e.cancel&&("paste"!==c&&"cut"!==c&&"copy"!==c||n.preventDefault())}))}var p=!!s(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===n.which&&p||9!==n.which)&&this.editorManager.observer.notify("keydown"===n.type?jt:Wt,{event:n,callBack:this.onSuccess.bind(this,e),value:r})}else!s(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(a(t,t,{requestType:t.item.subCommand,cancel:!1,itemCollection:r},!0),e.trigger(dt,t,(function(a){if(!a.cancel){0===o.getUndoRedoStack().length&&"Links"!==a.item.command&&"Images"!==a.item.command&&o.saveData(),e.isBlur=!1,e.contentModule.getEditPanel().focus(),"HTML"===e.editorMode&&i.restore();var s=a.item.subCommand.toLocaleLowerCase();"paste"===s||"cut"===s||"copy"===s?e.clipboardAction(s,n):(o.editorManager.observer.notify(Mt,{subCommand:a.item.subCommand}),o.editorManager.execCommand(a.item.command,a.item.subCommand,n,o.onSuccess.bind(o,e),a.item.value,"Pre"===a.item.subCommand&&"dropDownSelect"===t.name?{name:t.name}:r,"#"+e.getID()+" iframe"))}})));(s(n)||n&&"copy"!==n.action)&&this.enableUndo(e)}},e.prototype.getAncestorNode=function(e){return 3===e.nodeType?e.parentNode:e},e.prototype.onKeyHandler=function(e,t){var n=this;this.editorManager.observer.notify(Wt,{event:t,callBack:function(){e.contentChanged(),n.enableUndo(e)}})},e.prototype.onSuccess=function(e,t){(s(t.event)||t&&"copy"!==t.event.action)&&("undo"!==t.event.action&&"redo"!==t.event.action||e.contentChanged(),this.enableUndo(e),e.notify(lt,t)),e.trigger(ct,t,(function(t){if(e.setPlaceHolder(),"Images"===t.requestType||"Links"===t.requestType&&"HTML"===e.editorMode){var n=t;if("Links"===t.requestType&&t.event&&"keydown"===t.event.type&&32===t.event.keyCode)return;e.notify("insertCompleted",{args:n.event,type:t.requestType,isNotify:!0,elements:n.elements})}e.autoResize()}))},e.prototype.saveData=function(e){this.editorManager.undoRedoManager.saveData(e)},e.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},e.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},e.prototype.enableUndo=function(e){var t=this.getUndoStatus();!e.inlineMode.enable||F.isDevice&&!Bn()?e.toolbarModule&&(Fn(e.toolbarModule.baseToolbar,t),e.trigger(ht,t)):(Fn(e.quickToolbarModule.inlineQTBar.quickTBarObj,t),e.trigger(ht,t))},e}(),Xn="INSERT-IMAGE",Yn="INSERT-LINK",Zn="alignment-type",Qn="indent-type",er="p",tr=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],nr=["td","th"],rr=["table","tbody","td","tfoot","th","thead","tr"],ir="selection-type",or="inserthtml-type",ar="insert-text-type",sr="clear-type",lr=function(){function e(){this.startNodeName=[],this.endNodeName=[]}return e.prototype.saveInstance=function(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this},e.prototype.documentFromRange=function(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument},e.prototype.getRange=function(e){var t=this.get(e),n=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return n.startContainer!==e||n.endContainer!==e||n.startOffset||n.endOffset||(n.setStart(e.body,0),n.collapse(!0)),n},e.prototype.get=function(e){return e.defaultView.getSelection()},e.prototype.save=function(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)},e.prototype.getIndex=function(e){var t=0;if(e=e.previousSibling||"BR"!==e.tagName?e.previousSibling:e)for(e.nodeType;e;null)t++,e.nodeType,e=e.previousSibling;return t},e.prototype.isChildNode=function(e,t){for(var n=0;n<t.childNodes.length;n++)if(e.indexOf(t.childNodes[n])>-1)return!0;return!1},e.prototype.getNode=function(e,t,n){return t!==e||3!==e.nodeType&&e.firstChild&&-1===n.indexOf(e.firstChild)&&!this.isChildNode(n,e)?-1===n.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(n,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null},e.prototype.getNodeCollection=function(e){var t=e.startContainer.childNodes[e.startOffset]||e.startContainer,n=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if(t===n&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&"PRE"===e.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];var r=[];do{-1===r.indexOf(t)&&r.push(t),t=this.getNode(t,n,r)}while(t);return r},e.prototype.getParentNodeCollection=function(e){return this.getParentNodes(this.getNodeCollection(e),e)},e.prototype.getParentNodes=function(e,t){e=e.reverse();for(var n=0;n<e.length;n++)-1!==e.indexOf(e[n].parentNode)||3===e[n].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(n,1),n--):3===e[n].nodeType&&(e[n]=e[n].parentNode);return e},e.prototype.getSelectionNodeCollection=function(e){return this.getSelectionNodes(this.getNodeCollection(e))},e.prototype.getSelectionNodeCollectionBr=function(e){return this.getSelectionNodesBr(this.getNodeCollection(e))},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),n=0;n<e.length;n++)(3!==e[n].nodeType||""===e[n].textContent.trim()||1===e[n].textContent.length&&e[n].textContent.match(t))&&(e.splice(n,1),n--);return e.reverse()},e.prototype.getSelectionNodesBr=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),n=0;n<e.length;n++)"BR"!==e[n].nodeName&&(3!==e[n].nodeType||""===e[n].textContent.trim()||1===e[n].textContent.length&&e[n].textContent.match(t))&&(e.splice(n,1),n--);return e.reverse()},e.prototype.getInsertNodeCollection=function(e){return this.getInsertNodes(this.getNodeCollection(e))},e.prototype.getInsertNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&""===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()},e.prototype.getNodeArray=function(e,t,n){var r=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(n||this.rootNode);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),r.push(this.getIndex(e)),e=e.parentNode;return r},e.prototype.setRangePoint=function(e,t,n,r){for(var i=this.rootNode,o=n.length,a=r;o--;null)i=i&&i.childNodes[n[o]];return i&&a>=0&&e[t?"setStart":"setEnd"](i,a),e},e.prototype.restore=function(){var e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e},e.prototype.selectRange=function(e,t){this.setRange(e,t),this.save(t,e)},e.prototype.setRange=function(e,t){var n=this.get(e);n.removeAllRanges(),n.addRange(t)},e.prototype.setSelectionText=function(e,t,n,r,i){var o=e.createRange();o.setStart(t,r),o.setEnd(n,i),this.setRange(e,o)},e.prototype.setSelectionContents=function(e,t){var n=e.createRange();n.selectNode(t),this.setRange(e,n)},e.prototype.setSelectionNode=function(e,t){var n=e.createRange();n.selectNodeContents(t),this.setRange(e,n)},e.prototype.getSelectedNodes=function(e){return this.getNodeCollection(this.getRange(e))},e.prototype.Clear=function(e){this.get(e).removeAllRanges()},e.prototype.insertParentNode=function(e,t,n){n.surroundContents(t),this.selectRange(e,n)},e.prototype.setCursorPoint=function(e,t,n){var r=e.createRange(),i=e.defaultView.getSelection();r.setStart(t,n),r.collapse(!0),i.removeAllRanges(),i.addRange(r)},e}(),dr={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46"},cr=["BR","IMG"],hr="e-editor-select-start",pr="e-editor-select-end",ur=function(){function e(e,t){this.parent=e,this.nodeSelection=new lr,this.currentDocument=t}return e.prototype.contents=function(e){return e&&"IFRAME"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&tr.indexOf(e.tagName.toLowerCase())>=0},e.prototype.isLink=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()},e.prototype.blockParentNode=function(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,"e-node-inner"));null)if(e=e.parentNode,this.isBlockNode(e))return e;return e},e.prototype.rawAttributes=function(e){var t={},n=e.attributes;if(n.length>0)for(var r=0;r<n.length;r++){var i=n[r];t[i.nodeName]=i.value}return t},e.prototype.attributes=function(e){if(!e)return"";for(var t="",n=this.rawAttributes(e),r=Object.keys(n).sort(),i=0;i<r.length;i++){var o=r[i],a=n[o];a.indexOf("'")<0&&a.indexOf('"')>=0?t+=" "+o+"='"+a+"'":a.indexOf('"')>=0&&a.indexOf("'")>=0?t+=" "+o+'="'+(a=a.replace(/"/g,"&quot;"))+'"':t+=" "+o+'="'+a+'"'}return t},e.prototype.clearAttributes=function(e){for(var t=e.attributes,n=t.length-1;n>=0;n--){var r=t[n];e.removeAttribute(r.nodeName)}},e.prototype.openTagString=function(e){return"<"+e.tagName.toLowerCase()+this.attributes(e)+">"},e.prototype.closeTagString=function(e){return"</"+e.tagName.toLowerCase()+">"},e.prototype.createTagString=function(e,t,n){return"<"+e.toLowerCase()+this.attributes(t)+">"+n+"</"+e.toLowerCase()+">"},e.prototype.isList=function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},e.prototype.isElement=function(e){return e===this.parent},e.prototype.isEditable=function(e){return(!e.getAttribute||"true"===e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},e.prototype.hasClass=function(e,t){return e&&e.classList&&e.classList.contains(t)},e.prototype.replaceWith=function(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),N(e)},e.prototype.parseHTMLFragment=function(e){var t=m("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)},e.prototype.wrap=function(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.wrapInner=function(e,t){for(e.appendChild(t),(t=e.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");e.firstChild!==t;)t.appendChild(e.firstChild);return t},e.prototype.unWrap=function(e){for(var t=e.parentNode,n=[];e.firstChild;)n.push(e.firstChild),t.insertBefore(e.firstChild,e);return n=n.length>0?n:[e.parentNode],t.removeChild(e),n},e.prototype.getSelectedNode=function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(hr)||e.childNodes[t-1].classList.contains(pr))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e},e.prototype.nodeFinds=function(e,t){for(var n=[],r=0;r<t.length;r++)e.contains(t[r])&&e!==t[r]&&n.push(t[r]);return n},e.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},e.prototype.getRangePoint=function(e){var t=this.getSelection(),n=[];if(t&&t.getRangeAt&&t.rangeCount){n=[];for(var r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r))}else n=[this.currentDocument.createRange()];return void 0!==e?n[e]:n},e.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},e.prototype.getPreviousNode=function(e){for(e=e.previousElementSibling;e&&"\n"===e.textContent;null)e=e.previousElementSibling;return e},e.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},e.prototype.saveMarker=function(e,t){var n,r,i=this.parent.querySelector(".e-editor-select-start"),o=this.parent.querySelector(".e-editor-select-end");if(""===i.textContent&&s(o)&&"tab"!==t&&(1===i.childNodes.length&&"BR"===i.childNodes[0].nodeName?i.innerHTML="&#65279;&#65279;<br>":i.innerHTML="&#65279;&#65279;"),this.hasClass(i,hr)&&i.classList.length>1){var a=this.createTagString(er,i,this.encode(i.textContent));this.replaceWith(i,a),(i=this.parent.querySelector(".e-editor-select-start")).classList.remove(hr),n=i.childNodes[0]}else n=this.unWrap(i)[0];return this.hasClass(o,pr)&&o.classList.length>1?(a=this.createTagString(er,o,this.encode(o.textContent)),this.replaceWith(o,a),(o=this.parent.querySelector(".e-editor-select-end")).classList.remove(pr),r=o.childNodes[0]):r=o?this.unWrap(o)[0]:n,e.startContainer=e.getNodeArray(n,!0),e.endContainer=e.getNodeArray(r,!1),e},e.prototype.marker=function(e,t){return'<span class="'+e+'">'+t+"</span>"},e.prototype.setMarker=function(e){var t=e.range,n=t.startContainer.childNodes[t.startOffset]||t.startContainer,r=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(n.nodeType===Node.ELEMENT_NODE&&r.nodeType===Node.ELEMENT_NODE&&(n.contains(r)||r.contains(n))){var i=n.contains(r)?n:r;if(i.nodeType!==Node.TEXT_NODE){for(var o=[],a=[],s=i;i.contains(s);null)o.indexOf(s)<0&&s.childNodes&&s.childNodes.length?(o.push(s),s=s.childNodes[0]):s.nextSibling?s=s.nextSibling:s.parentNode&&(s=s.parentNode,o.push(s)),a.indexOf(s)<0&&(s.nodeType===Node.TEXT_NODE||nr.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===s.tagName||"IMG"===s.tagName))&&a.push(s);a.length&&(n=n.contains(r)?a[0]:n,r=a[a.length-1])}}n!==r?(n.nodeType!==Node.TEXT_NODE&&("BR"===n.tagName&&nr.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===n.tagName)?(this.replaceWith(n,this.marker(hr,this.encode(n.textContent))),t.startContainer.querySelector(".e-editor-select-start").appendChild(n)):this.replaceWith(n,this.marker(hr,this.encode(n.textContent))),r.nodeType!==Node.TEXT_NODE&&"BR"===r.tagName&&nr.indexOf(r.parentNode.tagName.toLocaleLowerCase())>=0?(this.replaceWith(r,this.marker(pr,this.encode(r.textContent))),t.endContainer.querySelector(".e-editor-select-end").appendChild(r)):this.ensureSelfClosingTag(r,pr,t)):this.ensureSelfClosingTag(n,hr,t)},e.prototype.ensureSelfClosingTag=function(e,t,n){var r=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.tagName)this.replaceWith(e,this.marker(hr,this.encode(e.textContent))),n.startContainer.querySelector(".e-editor-select-start").appendChild(e);else{if("IMG"===e.tagName){var i=document.createElement("p");e.parentElement.insertBefore(i,e),i.appendChild(e),e=i.children[0]}if("TABLE"===e.tagName)if(r=!0,""===e.textContent){var o=e.querySelectorAll("td");e=s((e=o[o.length-1]).childNodes[0])?e:e.childNodes[0]}else{for(var a=e.lastChild;3!==a.nodeType&&"#text"!==a.nodeName&&"BR"!==a.nodeName;)a=a.lastChild;e=a}for(var l=0;l<cr.length;l++)e=e.tagName!==cr[l]||r?e:e.parentNode;if(3===e.nodeType&&"#text"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.nodeName)this.replaceWith(e,this.marker(pr,this.encode(e.textContent))),n.endContainer.querySelector(".e-editor-select-end").appendChild(e);else{var d=this.marker(t,"");b([this.parseHTMLFragment(d)],e)}}},e.prototype.createTempNode=function(e){var t=e.textContent;if("BR"===e.tagName){var n="<p></p>",r=e.parentNode;nr.indexOf(r.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(n)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(hr)||e.classList.contains(pr))||t.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||t.length&&t.indexOf("\n")<0){n="<p></p>";var i=e;e=this.wrap(e,this.parseHTMLFragment(n)),(i.nodeType!==Node.ELEMENT_NODE||!i.firstChild||"BR"!==i.firstChild.nodeName||!i.classList.contains(hr)&&!i.classList.contains(pr))&&e.nextElementSibling&&"BR"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e},e.prototype.getImageTagInSelection=function(){var e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll("img"):null},e.prototype.blockNodes=function(){var e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount)for(var n=this.getRangePoint(),r=0;r<n.length;r++){var i=void 0,o=n[r],a=this.getSelectedNode(o.startContainer,o.startOffset),l=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(a)&&e.indexOf(a)<0&&e.push(a),(i=this.blockParentNode(a))&&e.indexOf(i)<0)if(nr.indexOf(i.tagName.toLocaleLowerCase())>=0&&("BR"===a.tagName||a.nodeType===Node.TEXT_NODE||a.classList.contains(hr)||a.classList.contains(pr))){var d=a.previousSibling&&a.previousSibling.nodeType===Node.TEXT_NODE?a.previousSibling:a;a.nextSibling||a.previousSibling||"BR"!==a.tagName?e.push(this.createTempNode(d)):e.push(d)}else e.push(i);for(var c=[],h=a;h!==l&&h!==this.parent;null)c.indexOf(h)<0&&h.childNodes&&h.childNodes.length?(c.push(h),h=h.childNodes[0]):h&&8!==h.nodeType&&("BR"===h.tagName||h.nodeType===Node.TEXT_NODE&&""!==h.textContent.trim()||h.nodeType!==Node.TEXT_NODE&&(h.classList.contains(hr)||h.classList.contains(pr)))&&nr.indexOf(h.parentNode.tagName.toLocaleLowerCase())>=0?h=this.createTempNode(h):h.nextSibling&&8!==h.nextSibling.nodeType&&("BR"===h.nextSibling.tagName||h.nextSibling.nodeType===Node.TEXT_NODE||h.nextSibling.classList.contains(hr)||h.nextSibling.classList.contains(pr))&&nr.indexOf(h.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?h=this.createTempNode(h.nextSibling):h.nextSibling?h=h.nextSibling:h.parentNode&&(h=h.parentNode,c.push(h)),e.indexOf(h)<0&&h.nodeType===Node.ELEMENT_NODE&&nr.indexOf(h.parentNode.tagName.toLocaleLowerCase())>=0&&(h.classList.contains(hr)||h.classList.contains(pr))&&e.push(this.createTempNode(h)),this.isBlockNode(h)&&this.ignoreTableTag(h)&&c.indexOf(h)<0&&e.indexOf(h)<0&&(h!==l||o.endOffset>0)&&e.push(h),"IMG"===h.nodeName&&"true"===h.parentElement.contentEditable&&e.push(h);(i=this.blockParentNode(l))&&this.ignoreTableTag(i)&&e.indexOf(i)<0&&!s(i.previousElementSibling)&&"IMG"!==i.previousElementSibling.tagName&&e.push(i)}for(var p=e.length-1;p>0;p--)if((c=this.nodeFinds(e[p],e)).length){var u=e[p].querySelectorAll("ul, ol");if("LI"===e[p].tagName&&u.length>0)continue;e.splice(p,1)}return e},e.prototype.ignoreTableTag=function(e){return!(rr.indexOf(e.tagName.toLocaleLowerCase())>=0)},e}(),mr=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function fr(){var e=!1;return F.isDevice&&F.isIos&&(e=!0),e}function gr(e,t){if("BODY"===e.nodeName&&!s(t)){var n=top.window.document.querySelector(t);s(n)||n.contentWindow.focus()}}var vr=function(){function e(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(_t,this.applyListsHandler,this),this.parent.observer.on(qt,this.keyDownHandler,this)},e.prototype.testList=function(e){var t=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],n=s(e)?null:e.innerText.trim().split(".")[0]+".";if(!s(n))for(var r=0;r<t.length;r++)if(t[r].test(n))return!0;return!1},e.prototype.testCurrentList=function(e){var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!s(e.startContainer.textContent.slice(0,e.startOffset)))for(var n=0;n<t.length;n++)if(t[n].test(e.startContainer.textContent.slice(0,e.startOffset)))return!0;return!1},e.prototype.spaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var n=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),r=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),n.previousElementSibling),i=n.nextElementSibling,o=s(r)?null:r.innerText.trim().substring(0,1),a=s(i)?null:i.innerText.trim().substring(0,1),l=this.testCurrentList(t),d=this.testList(r),c=this.testList(i);d||c||"*"===o||"*"===a||(l?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault()):"*"===t.startContainer.textContent.slice(0,t.startOffset)&&(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()))},e.prototype.enterList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);n===this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset)&&"LI"===n.tagName&&""===n.textContent.trim()&&65279===n.textContent.charCodeAt(0)&&(n.textContent="")},e.prototype.keyDownHandler=function(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),9===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);e.event.action&&"indent"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument));var n,r=t.startOffset,i=t.endOffset,o=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);if(o===this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset)&&("BR"===o.nodeName||"#text"===o.nodeName)&&nr.indexOf(o.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&"indent"===e.event.action||this.domNode.setMarker(this.saveSelection),n=this.domNode.blockNodes();for(var a=[],s=!0,l=0;l<n.length;l++)"LI"===n[l].parentNode.tagName?a.push(n[l].parentNode):"LI"===n[l].tagName&&"P"!==n[l].childNodes[0].tagName&&"OL"!==n[l].childNodes[0].tagName&&"UL"!==n[l].childNodes[0].tagName&&a.push(n[l]);a.length>1||a.length&&(0===r&&0===i||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(a[0]),e.event.shiftKey?(this.revertList(a),this.revertClean()):s=this.nestedList(a),s&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&"indent"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&"indent"===e.event.action||(e.event&&e.event.shiftKey&&"Tab"===e.event.key&&(e.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getAction=function(e){return"OL"===e.parentNode.nodeName?"OL":"UL"},e.prototype.revertClean=function(){for(var e=this.parent.editableElement.querySelectorAll("ul, ol"),t=0;t<e.length;t++){var n=e[t].querySelectorAll("ul, ol");if(n.length>0)for(var r=0;r<n.length;r++){var i=n[r].previousSibling;i&&"LI"===i.tagName&&i.appendChild(n[r])}}},e.prototype.noPreviousElement=function(e){var t,n,r=e.querySelectorAll("ol, ul"),i=e.querySelectorAll("li"),o=this.domNode.contents(i[0])[0];if(i.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?t=i[0]:n=r[0],t)for(var a=this.domNode.contents(e)[0];a&&!this.domNode.isList(a);null){var s=a.nextSibling;y([a],t),x(e,{"list-style-type":"none"}),x(t,{"list-style-type":""}),a=s}else if(n){for(y([d=m("li")],n),a=this.domNode.contents(e)[0];a&&!this.domNode.isList(a);null)s=a.nextSibling,d.appendChild(a),a=s;y([n],e.parentNode),N(e),y([l=m("li",{styles:"list-style-type: none;"})],n.parentNode),b([n],l)}else{var l,d;y([l=m("li",{styles:"list-style-type: none;"})],e.parentNode),y([d=m(e.parentNode.tagName)],l),b([e],d)}},e.prototype.nestedList=function(e){for(var t=!1,n=0;n<e.length;n++){var r=this.domNode.getPreviousNode(e[n]);if(r){t=!0;var i=void 0,o=void 0,a=e[n].querySelectorAll("ol, ul"),s=e[n].querySelectorAll("li"),l=this.domNode.contents(s[0])[0];if(s.length>0&&("OL"===l.nodeName||"UL"===l.nodeName)?o=s[0]:i=a[0],i){y([h=m("li")],i);for(var d=this.domNode.contents(e[n])[0];d&&!this.domNode.isList(d);null){var c=d.nextSibling;h.appendChild(d),d=c}b([i],r),N(e[n])}else if(o){if("LI"===r.tagName){for(d=this.domNode.contents(e[n])[0];d&&!this.domNode.isList(d);null)c=d.nextSibling,y([d],o),x(e[n],{"list-style-type":"none"}),x(o,{"list-style-type":""}),d=c;b([o.parentNode],r),N(e[n])}}else{var h;"LI"===r.tagName&&(b([h=m(e[n].parentNode.tagName)],r),b([e[n]],h))}}else{var p=e[n];t=!0,this.noPreviousElement(p)}}return t},e.prototype.applyListsHandler=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.domNode.setMarker(this.saveSelection);for(var n=this.domNode.blockNodes(),r=0;r<n.length;r++)"TABLE"===n[r].tagName&&n.splice(r,1),"LI"!==n[r].tagName&&"LI"===n[r].parentNode.tagName&&(n[r]=n[r].parentNode);this.applyLists(n,this.currentAction,e.selector),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.applyLists=function(e,t,n){if(this.isRevert(e,t))this.revertList(e),this.removeEmptyListElements();else{this.checkLists(e,t);for(var r=0;r<e.length;r++)if("LI"!==e[r].tagName){var i="<"+t+">",o="</"+t+">",a="li"+("IMG"===e[r].tagName?"":this.domNode.attributes(e[r])),s=e[r].tagName.toLowerCase()===er?e[r].innerHTML:e[r].outerHTML,l=i+this.domNode.createTagString(a,null,s)+o;this.domNode.replaceWith(e[r],l)}}this.cleanNode(),this.parent.editableElement.focus(),fr()&&gr(this.parent.editableElement,n),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},e.prototype.removeEmptyListElements=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&N(e[t])},e.prototype.isRevert=function(e,t){for(var n=!0,r=0;r<e.length;r++){if("LI"!==e[r].tagName)return!1;e[r].parentNode.tagName!==t&&(n=!1)}return n},e.prototype.checkLists=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r].parentNode;"LI"===e[r].tagName&&i.tagName!==t&&n.indexOf(i)<0&&n.push(i)}for(var o=n.length-1;o>=0;o--){var a=n[o],s="<"+t.toLowerCase()+" "+this.domNode.attributes(a)+">"+a.innerHTML+"</"+t.toLowerCase()+">";this.domNode.replaceWith(n[o],s)}},e.prototype.cleanNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var n=e[t];if(this.domNode.isList(n.previousElementSibling)&&this.domNode.openTagString(n)===this.domNode.openTagString(n.previousElementSibling)){for(var r=this.domNode.contents(n),i=0;i<r.length;i++)n.previousElementSibling.appendChild(r[i]);n.parentNode.removeChild(n)}}},e.prototype.findUnSelected=function(e,t){if((e=e.slice().reverse()).length>0){var n=[],r=[],i=[],o=[];i=t[t.length-1].childNodes;for(var a=0;a<i.length;a++)if("OL"===i[a].tagName||"UL"===i[a].tagName){var s=i[a].querySelectorAll("li");if(s.length>0)for(var l=0;l<s.length;l++)o.push(s[l])}for(var d=0;d<o.length;d++){for(var c=0,h=0;h<e.length;h++)o[d].contains(e[h])||(c+=1);c===e.length&&r.push(o[d])}if(r.length>0)for(var p=0;p<r.length;p++)"OL"!==this.domNode.contents(r[p])[0].nodeName&&"UL"!==this.domNode.contents(r[p])[0].nodeName&&n.push(r[p]);n.length>0&&this.nestedList(n)}},e.prototype.revertList=function(e){for(var t=[],n=e.length-1;n>=0;n--)for(var r=n-1;r>=0;r--)if(e[r].contains(e[n])||e[r]===e[n]){t.push(e[n]),e.splice(n,1);break}this.findUnSelected(t,e);var i=[];for(n=0;n<e.length;n++){var o=e[n];3===this.domNode.contents(o)[0].nodeType&&0===this.domNode.contents(o)[0].textContent.trim().length&&N(this.domNode.contents(o)[0]);var a=e[n].parentNode,l=o.getAttribute("class");if(0===t.length){var d=e[n].querySelectorAll("ul, ol")[0];if(d&&d.querySelectorAll("li")){var c=m(d.tagName);b([c],d.parentNode);var h=m("li",{styles:"list-style-type: none;"});b([h],c),b([d],h)}}if(o.parentNode.insertBefore(this.closeTag(a.tagName),o),"LI"===a.parentNode.tagName)o.parentNode.insertBefore(this.closeTag("LI"),o);else{if(0===o.querySelectorAll(tr.join(", ")).length){var p="<p"+(s(l)?' class="e-rte-wrap-inner"':' class="'+l+' e-rte-wrap-inner"')+this.domNode.attributes(a)+"></p>";this.domNode.wrapInner(o,this.domNode.parseHTMLFragment(p))}else if(3===this.domNode.contents(o)[0].nodeType){var u=this.domNode.createTagString(er,a,this.parent.domNode.encode(this.domNode.contents(o)[0].textContent));this.domNode.replaceWith(this.domNode.contents(o)[0],u)}else if(this.domNode.contents(o)[0].classList.contains(hr)||this.domNode.contents(o)[0].classList.contains(pr))u=this.domNode.createTagString(er,a,this.domNode.contents(o)[0].outerHTML),this.domNode.replaceWith(this.domNode.contents(o)[0],u);else{var f=o.firstChild;l=f.getAttribute("class"),E(f,this.domNode.rawAttributes(a)),l&&f.getAttribute("class")&&E(f,{class:l+" "+f.getAttribute("class")})}b([this.openTag("LI")],o),y([this.closeTag("LI")],o)}this.domNode.insertAfter(this.openTag(a.tagName),o),"LI"===a.parentNode.tagName&&(a=a.parentNode.parentNode),i.indexOf(a)<0&&i.push(a)}for(n=0;n<i.length;n++){var g=i[n],v=g.innerHTML;v=(v=v.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(g)+">"),this.domNode.replaceWith(g,this.domNode.openTagString(g)+v.trim()+this.domNode.closeTagString(g))}var C=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(n=0;n<C.length;n++)N(C[n]);var M=this.parent.editableElement.querySelectorAll("li:empty");for(n=0;n<M.length;n++)N(M[n])},e.prototype.openTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+e.toLowerCase()+'"></span>')},e.prototype.closeTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+e.toLowerCase()+'"></span>')},e}(),yr=function(){function e(){}return e.WrapBefore=function(e,t,n){return t.innerText=e.textContent,n?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]},e.Wrap=function(e,t){return this.AppendBefore(t,e),t.appendChild(e),e},e.unwrap=function(e){for(var t=e.parentNode,n=[];e.firstChild;null)n.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),n},e.AppendBefore=function(e,t,n){return t.parentNode?n?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.insertBefore(e,t):t},e}(),br=function(){function e(){this.position=-1,this.nodeSelection=new lr}return e.prototype.GetSpliceNode=function(e,t){return t=this.SplitNode(e,t,!0),this.SplitNode(e,t,!1)},e.prototype.SplitNode=function(e,t,n){if(t){var r=e.cloneRange(),i=t.parentNode,o=this.nodeSelection.getIndex(t);r.collapse(n),n?r.setStartBefore(t):r.setEndAfter(t);var a,s=r.extractContents();return n?(t=i.childNodes[o],(s=this.spliceEmptyNode(s,!1))&&s.childNodes.length>0&&(1===s.childNodes.length&&"IMG"!==s.childNodes[0].nodeName&&this.isImgElm(s)&&""===s.textContent||(t?yr.AppendBefore(s,t):(i.appendChild(s),(a=document.createElement("div")).innerHTML="&#65279;&#65279;",t=a.firstChild,i.appendChild(t))))):(t=i.childNodes.length>1?i.childNodes[o]:i.childNodes[0],(s=this.spliceEmptyNode(s,!0))&&s.childNodes.length>0&&(1===s.childNodes.length&&"IMG"!==s.childNodes[0].nodeName&&this.isImgElm(s)&&""===s.textContent||(t?yr.AppendBefore(s,t,!0):(i.appendChild(s),(a=document.createElement("div")).innerHTML="&#65279;&#65279;",i.insertBefore(a.firstChild,i.firstChild),t=i.firstChild)))),t}return null},e.prototype.isImgElm=function(e){var t=!0;if(1===e.childNodes.length&&"IMG"!==e.childNodes[0].nodeName)for(var n=e.childNodes[0],r=0;!s(n.childNodes)&&r<n.childNodes.length;r++)"IMG"===n.childNodes[r].nodeName&&(t=!1);else t=!0;return t},e.prototype.spliceEmptyNode=function(e,t){var n;return(n=1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName&&""===e.childNodes[0].textContent||""===e.textContent?-1:e.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(e.childNodes[n],t):n>-1?this.spliceEmptyNode(e.childNodes[0],t):3!==e.nodeType&&11!==e.nodeType&&e.parentNode.removeChild(e),e},e.prototype.GetCursorStart=function(e,t,n){for(var r=(e=n?e:e.reverse())[0],i=0;i<e.length&&(n?e[i]<t:e[i]>=t);i++)r=e[i];return r},e.prototype.GetCursorRange=function(e,t,n){var r=e.createRange(),i=[];i.push(0);for(var o=this.TrimLineBreak(n.data),a=o.indexOf(" ",0);-1!==a;)i.indexOf(a)<0&&i.push(a),new RegExp("\\s").test(o[a-1])&&i.indexOf(a-1)<0&&i.push(a-1),new RegExp("\\s").test(o[a+1])&&i.push(a+1),a=o.indexOf(" ",a+1);if(i.push(o.length),i.indexOf(t.startOffset)>=0||i.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(o[0]))||i[i.length-1]-1===t.startOffset)r=t,this.position=1;else{var s=this.GetCursorStart(i,t.startOffset,!0);this.position=t.startOffset-s,r.setStart(t.startContainer,s),r.setEnd(t.startContainer,this.GetCursorStart(i,t.startOffset,!1))}return r},e.prototype.GetCursorNode=function(e,t,n){return this.GetSpliceNode(this.GetCursorRange(e,t,n),n)},e.prototype.TrimLineBreak=function(e){return e.replace(/(\r\n\t|\n|\r\t)/gm," ")},e}(),Cr=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(Gt,this.applyFormats,this),this.parent.observer.on(qt,this.onKeyDown,this)},e.prototype.getParentNode=function(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e},e.prototype.onKeyDown=function(e){if(13===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,r=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,i=T(n,"pre"),o=T(r,"pre");if(!s(i)&&!s(i.parentElement)&&"LI"===i.parentElement.tagName)return;if((s(i)&&!s(o)||!s(i)&&s(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0)),13===e.event.which&&!s(i)&&!s(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t);var a=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],l=t.startContainer.childNodes[t.endOffset-1],d=t.startContainer;if(s(a)||s(l)||!s(a.nextSibling)||"BR"!==a.nodeName||"BR"!==l.nodeName)if(8203===d.textContent.charCodeAt(0)&&1===d.textContent.length||0===d.textContent.length){for(;"PRE"!==d.parentElement.nodeName&&(1===d.textContent.length||0===d.textContent.length);)d=d.parentElement;!s(d.previousSibling)&&"BR"===d.previousSibling.nodeName&&s(d.nextSibling)?this.paraFocus(d.parentElement):this.isNotEndCursor(i,t)}else this.isNotEndCursor(i,t);else this.paraFocus(t.startContainer)}}},e.prototype.removeCodeContent=function(e){var t=new RegExp(String.fromCharCode(65279),"g");if(!s(e.endContainer.textContent.match(t))){var n=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,""),""===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,n)}},e.prototype.deleteContent=function(e){e.startContainer===e.endContainer&&e.startOffset===e.endOffset||e.deleteContents()},e.prototype.paraFocus=function(e){var t=m("p");t.innerHTML="<br>",this.parent.domNode.insertAfter(t,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0),N(e.lastChild)},e.prototype.isNotEndCursor=function(e,t){var n=new br,r=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)){this.insertMarker(e,t);var i=m("br");e.childNodes[t.endOffset].parentElement.insertBefore(i,e.childNodes[t.endOffset])}else{var o=n.SplitNode(t,e,!0);this.insertMarker(e,t);var a=e.previousElementSibling;"PRE"===a.tagName&&(a.insertAdjacentHTML("beforeend","<br>"+o.innerHTML),N(e))}this.setCursorPosition(r,e)},e.prototype.setCursorPosition=function(e,t){var n=!1,r=this.parent.editableElement.querySelector(".tempSpan"),i=r.parentElement;if(""===r.parentNode.textContent?n=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0),e)if(n)i===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0),N(r)):this.focusSelectionParent(r,i);else{var o=m("br");this.parent.domNode.insertAfter(o,r),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0),N(r)}else n?this.focusSelectionParent(r,i):N(r)},e.prototype.focusSelectionParent=function(e,t){N(e),t.innerHTML="​",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},e.prototype.insertMarker=function(e,t){var n=m("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(n,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(n,t.startContainer)},e.prototype.applyFormats=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=!1;this.parent.editableElement!==t.endContainer||s(this.parent.editableElement.children[t.endOffset-1])||"TABLE"!==this.parent.editableElement.children[t.endOffset-1].tagName||(n=!0);var r=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(r);for(var i=this.parent.domNode.blockNodes(),o=0;o<i.length;o++){var a=void 0,l=void 0;if("blockquote"===e.subCommand.toLowerCase()?(a=this.getParentNode(i[o]),l=this.parent.domNode.isList(a)||"TABLE"===a.tagName?a.outerHTML:a.innerHTML):l=(a=i[o]).innerHTML,!(e.subCommand.toLowerCase()===a.tagName.toLowerCase()&&("pre"!==e.subCommand.toLowerCase()||!s(e.exeValue)&&"dropDownSelect"===e.exeValue.name)||s(a.parentNode)||"LI"===a.tagName&&"pre"!==e.subCommand.toLowerCase()||"TABLE"===a.tagName&&"pre"===e.subCommand.toLowerCase())){this.cleanFormats(a,e.subCommand);var d="pre"===e.subCommand.toLowerCase()&&"pre"===a.tagName.toLowerCase()?"p":e.subCommand,c=this.parent.domNode.createTagString(d,a,l.replace(/>\s+</g,"><"));"LI"===a.tagName?(a.innerHTML="",a.insertAdjacentHTML("beforeend",c)):this.parent.domNode.replaceWith(a,c)}}this.preFormatMerge();var h=this.parent.editableElement.querySelector(".e-editor-select-start"),p=this.parent.editableElement.querySelector(".e-editor-select-end");s(h)||s(p)||(h=h.lastChild,p=p.lastChild),r=this.parent.domNode.saveMarker(r,null),fr()&&gr(this.parent.editableElement,e.selector),n?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,h,p,0,p.textContent.length):r.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.preFormatMerge=function(){var e=this.parent.editableElement.querySelectorAll("PRE");if(!s(e))for(var t=0;t<e.length;t++){var n=e[t].previousElementSibling;s(n)||"PRE"!==n.tagName||(n.insertAdjacentHTML("beforeend","<br>"+e[t].innerHTML),N(e[t]))}},e.prototype.cleanFormats=function(e,t){var n=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];t=t.toLowerCase();for(var r=0;r<n.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;r++)e.style.removeProperty(n[r])},e}(),Nr=function(){function e(){}return e.Insert=function(e,t,n,r){var i,o;"string"==typeof t?((o=document.createElement("div")).innerHTML=t,i=r?o:o.firstChild):r&&(s(t)||s(t.classList)||!t.classList.contains("pasteContent"))?((o=document.createElement("div")).appendChild(t),i=o):i=t;var a=new lr,l=new br,d=a.getRange(e),c=d.startOffset===d.endOffset&&0===d.startOffset&&d.startContainer===d.endContainer,h=d.collapsed,p=this.getNodeCollection(d,a,i),u="table"===i.nodeName.toLowerCase()?this.closestEle(p[0].parentNode,n):p[0];if(r||!s(i)&&!s(i.classList)&&i.classList.contains("pasteContent"))this.pasteInsertHTML(p,i,d,a,l,e,h,u,n);else if(n!==d.startContainer&&(!h&&(u.nodeType!==Node.ELEMENT_NODE||-1===rr.indexOf(u.tagName.toLocaleLowerCase()))||"table"===i.nodeName.toLowerCase()&&u&&-1===rr.indexOf(u.tagName.toLocaleLowerCase()))){var m=l.GetSpliceNode(d,u),f=m.previousSibling,g=m.parentNode;if(1===p.length)a.setSelectionContents(e,m),d=a.getRange(e);else{var v=l.GetSpliceNode(d,p[p.length-1].parentElement);v=s(v)?m:v,a.setSelectionText(e,m,v,0,3===v.nodeType?v.textContent.length:v.childNodes.length),d=a.getRange(e)}d.extractContents(),"TABLE"===t.tagName&&this.removeEmptyElements(n);for(var y=0;y<p.length;y++)if(3!==p[y].nodeType&&null!=p[y].parentNode){if("IMG"===p[y].nodeName)continue;p[y].parentNode.removeChild(p[y])}if(f)yr.AppendBefore(i,f,!0);else{for(var b=null;g!==n&&g.firstChild&&""===g.textContent.trim();)b=g,g=g.parentNode;null!==b&&(g=b),g.firstChild&&(g!==n||"TABLE"===i.nodeName&&c&&g===d.startContainer&&g===d.endContainer)?""===g.textContent.trim()&&g!==n?(yr.AppendBefore(i,g,!1),N(g)):yr.AppendBefore(i,g.firstChild,!1):g.appendChild(i)}"IMG"===i.nodeName?this.imageFocus(i,a,e):3!==i.nodeType?a.setSelectionText(e,i,i,0,i.childNodes.length):a.setSelectionText(e,i,i,0,i.textContent.length)}else{if(d.deleteContents(),c&&""===d.startContainer.textContent&&(d.startContainer.innerHTML=""),F.isIE){var C=e.createDocumentFragment();C.appendChild(i),d.insertNode(C)}else d.insertNode(i);3!==i.nodeType&&i.childNodes.length>0?a.setSelectionText(e,i,i,1,1):"IMG"===i.nodeName?this.imageFocus(i,a,e):3!==i.nodeType?a.setSelectionContents(e,i):a.setSelectionText(e,i,i,i.textContent.length,i.textContent.length)}},e.pasteInsertHTML=function(e,t,n,r,i,o,a,l,d){var c,h,p,u,f=n.startOffset===n.endOffset&&n.startContainer===n.endContainer;if(f&&n.startContainer===d&&""===d.textContent){var g=this.getImmediateBlockNode(e[e.length-1],d);r.setSelectionText(o,g,g,0,0),n=r.getRange(o)}d!==n.startContainer&&(!a&&(l.nodeType!==Node.ELEMENT_NODE||-1===rr.indexOf(l.tagName.toLocaleLowerCase()))||"table"===t.nodeName.toLowerCase()&&l&&-1===rr.indexOf(l.tagName.toLocaleLowerCase()))&&(h=s((u=i.GetSpliceNode(n,l)).previousSibling)?u.parentNode.previousSibling:u.previousSibling,1===e.length?(r.setSelectionContents(o,u),n=r.getRange(o),p=!0):(c=s(c=i.GetSpliceNode(n,e[e.length-1].parentElement))?u:c,r.setSelectionText(o,u,c,0,3===c.nodeType?c.textContent.length:c.childNodes.length),n=r.getRange(o),p=!1));var v=!1;this.removingComments(t);for(var y,b=t.childNodes,C=0;C<b.length;C++)if(tr.indexOf(b[C].nodeName.toLocaleLowerCase())>=0){v=!0;break}var E=document.createDocumentFragment();if(v){this.insertTempNode(n,t,e,i,d);var M=!0,S=void 0,w=void 0,T=void 0;for(n.deleteContents();t.firstChild;)if("#text"!==t.firstChild.nodeName||""!==t.firstChild.textContent.trim())if("#text"===t.firstChild.nodeName&&M||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&M){if(y=t.firstChild,s(t.previousElementSibling)){var x=m("p");t.parentElement.insertBefore(x,t)}t.previousElementSibling.appendChild(t.firstChild)}else y=t.firstChild,"#text"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(S?(T.appendChild(t.firstChild),E.appendChild(T)):((w=m("p")).appendChild(t.firstChild),E.appendChild(w)),T=w,S=!0):(E.appendChild(t.firstChild),S=!1),M=!1;else N(t.firstChild);t.parentNode.replaceChild(E,t)}else if(f){var L=m("span",{className:"tempSpan"});for(n.insertNode(L);t.firstChild;)y=t.firstChild,E.appendChild(t.firstChild);L.parentNode.replaceChild(E,L)}else{for(;t.firstChild;)y=t.firstChild,E.appendChild(t.firstChild);p?u.parentNode.replaceChild(E,u):(n.deleteContents(),N(c),s(h)?d.appendChild(E):h.parentNode.appendChild(E))}"#text"===y.nodeName?this.placeCursorEnd(y,t,r,o,d):this.cursorPos(y,t,r,o,d)},e.placeCursorEnd=function(e,t,n,r,i){for(e="BR"===e.nodeName?e.previousSibling:e;!s(e)&&"#text"!==e.nodeName&&"IMG"!==e.nodeName&&"BR"!==e.nodeName;)e=e.lastChild;"IMG"===(e=s(e)?t:e).nodeName?this.imageFocus(e,n,r):n.setSelectionText(r,e,e,e.textContent.length,e.textContent.length),this.removeEmptyElements(i)},e.getNodeCollection=function(e,t,n){var r=[];return e.startOffset===e.endOffset&&e.startContainer===e.endContainer&&("TD"===e.startContainer.nodeName||n.classList&&n.classList.contains("pasteContent"))?r.push(e.startContainer.childNodes[e.endOffset]):r=t.getInsertNodeCollection(e),r},e.insertTempNode=function(e,t,n,r,i){if(e.startContainer!==i||s(e.startContainer.childNodes[e.endOffset-1])||"TABLE"!==e.startContainer.childNodes[e.endOffset-1].nodeName)if(e.startContainer!==i||s(e.startContainer.childNodes[e.endOffset])||"TABLE"!==e.startContainer.childNodes[e.endOffset].nodeName){var o=this.getImmediateBlockNode(n[n.length-1],i);if("TD"===o.nodeName||"TH"===o.nodeName){var a=m("span",{className:"tempSpan"});e.insertNode(a),a.parentNode.replaceChild(t,a)}else{var l=r.GetSpliceNode(e,o);l.parentNode.replaceChild(t,l)}}else e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset]);else s(e.startContainer.childNodes[e.endOffset-1].nextSibling)?e.startContainer.appendChild(t):e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset-1].nextSibling)},e.cursorPos=function(e,t,n,r,i){e.classList.add("lastNode"),i.innerHTML=function(e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","tempDiv");var n=document.createElement("div");if(t.childNodes.length>0){for(var r=void 0,i=void 0,o=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||mr.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(r?i.appendChild(t.firstChild):(o=m("p"),n.appendChild(o),o.appendChild(t.firstChild)),i=o,r=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?N(t.firstChild):(n.appendChild(t.firstChild),r=!1);for(var a=n.querySelectorAll("table"),s=0;s<a.length;s++){"0"===a[s].getAttribute("border")&&a[s].removeAttribute("border");for(var l=a[s].querySelectorAll("td"),d=0;d<l.length;d++)l[d].style.removeProperty("border");a[s].classList.contains(Bt)||a[s].classList.add(Bt)}var c=n.querySelectorAll("img");for(s=0;s<c.length;s++)c[s].classList.contains(Ht)||c[s].classList.add(Ht),c[s].classList.contains(Rt)||c[s].classList.contains(Ot)||c[s].classList.add(Rt)}return n.innerHTML}(i.innerHTML),e=i.querySelector(".lastNode"),this.placeCursorEnd(e,t,n,r,i),e.classList.remove("lastNode"),0===e.classList.length&&e.removeAttribute("class")},e.imageFocus=function(e,t,n){var r=document.createTextNode(" ");e.parentNode.insertBefore(r,e.nextSibling),t.setSelectionText(n,e.nextSibling,e.nextSibling,0,0)},e.getImmediateBlockNode=function(e,t){do{e=e.parentNode}while(tr.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.findDetachEmptyElem=function(e){return s(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"true"!==e.parentElement.contentEditable?this.findDetachEmptyElem(e.parentElement):e},e.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),n=0;n<t.length;n++)if("IMG"!==t[n].tagName&&"BR"!==t[n].tagName&&"IFRAME"!==t[n].tagName&&"TD"!==t[n].tagName&&"SOURCE"!==t[n].tagName&&"HR"!==t[n].tagName){var r=this.findDetachEmptyElem(t[n]);s(r)||N(r)}},e.closestEle=function(e,t){for(var n=e;n&&1===n.nodeType;){if(n.parentNode===t||!s(n.parentNode.tagName)&&-1!==nr.indexOf(n.parentNode.tagName.toLocaleLowerCase()))return n;n=n.parentNode}return null},e.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],e}(),Er=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(Yn,this.linkCommand,this)},e.prototype.linkCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(e);break;case"openlink":this.openLink(e);break;case"removelink":this.removeLink(e)}},e.prototype.createLink=function(e){var t=!s(e.item.selectParent)&&e.item.selectParent.length>0&&T(e.item.selectParent[0],"a");if(t=s(t)?!s(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,s(t)||"A"!==t.tagName){var n=(new lr).getRange(this.parent.currentDocument),r=!!s(e.item.text)||e.item.text.replace(/ /g,"").localeCompare(n.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(e.event&&"keydown"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||"Paste"===e.item.action||n.collapsed||r){var i=this.createAchorNode(e);if(i.innerText=""===e.item.text?e.item.url:e.item.text,e.item.selection.restore(),Nr.Insert(this.parent.currentDocument,i,this.parent.editableElement),!e.event||"keydown"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode)d="Paste"===e.item.action?i.childNodes[0].textContent.length:0,e.item.selection.setSelectionText(this.parent.currentDocument,i.childNodes[0],i.childNodes[0],d,i.childNodes[0].textContent.length);else{var o=e.item.selection.range.startContainer;o.textContent=this.removeText(o.textContent,e.item.text)}}else this.createLinkNode(e)}else{var a=t,l="";if(s(e.item.url)||a.setAttribute("href",e.item.url),s(e.item.title)||a.setAttribute("title",e.item.title),s(e.item.text)||(l=a.innerText,a.innerText=e.item.text),s(e.item.target)?a.removeAttribute("target"):a.setAttribute("target",e.item.target),l===e.item.text)e.item.selection.setSelectionText(this.parent.currentDocument,a,a,1,1),e.item.selection.restore();else{var d="Paste"===e.item.action?a.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,a.childNodes[0],a.childNodes[0],d,a.childNodes[0].textContent.length)}}e.callBack&&e.callBack({requestType:"Links",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.createLinkNode=function(e){for(var t,n,r=new lr,i=new br,o=r.getRange(this.parent.currentDocument),a=this.getSelectionNodes(r.getNodeCollection(o)),s=r.save(o,this.parent.currentDocument),l=[],d=[],c=[],h=[],p=[],u=0;u<a.length;u++)a[u]=i.GetSpliceNode(o,a[u]),l[u]=a[u];for(var m=0;m<l.length;m++){var f=!0;for(t=l[m];!0===f;){if("A"===t.parentElement.nodeName){var g=t.parentElement;t.parentElement.parentElement.insertBefore(g.firstChild,g),t.parentElement.removeChild(g)}this.isBlockNode(t.parentElement)||0===l.length||0===m||m===l.length-1?(d[m]=t,f=!1):t=t.parentElement}}m=0;for(var v=0;m<d.length;m++)if(0===m&&(p[v]=d[m]),d.length>1&&m<d.length-1){if(d[m].parentElement===d[m+1].parentElement&&d[m]===d[m+1])continue;p[v+1]=d[m+1],v++}var y=0;for(h[y]=this.createAchorNode(e),m=0;m<p.length;m++)if(0===m&&(n=p[m].cloneNode(!0),h[m].appendChild(n)),m<p.length-1)if(p[m].parentNode===p[m+1].parentNode){var b=p[m+1].cloneNode(!0);h[y].appendChild(b)}else h[y+=1]=this.createAchorNode(e),n=p[m+1].cloneNode(!0),h[y].appendChild(n);this.parent.nodeSelection.setRange(document,s.range),m=0;for(var C=0,N=0;m<=p.length;m++)0===m&&(p[m].parentNode.insertBefore(h[C],p[m].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,h[C]),c[N]=p[m],N++),m<p.length-1&&(p[m].parentNode===p[m+1].parentNode?(c[N]=p[m+1],N++):(C+=1,p[m+1].parentNode.insertBefore(h[C],p[m+1]),c[N]=p[m+1],N++));for(m=0;m<c.length;m++)c[m].parentNode&&c[m].parentNode.removeChild(c[m])},e.prototype.createAchorNode=function(e){var t=m("a",{className:"e-rte-anchor",attrs:{href:e.item.url,title:s(e.item.title)||""===e.item.title?e.item.url:e.item.title}});return s(e.item.target)||t.setAttribute("target",e.item.target),t},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)3===e[t].nodeType&&""!==e[t].textContent.trim()||"IMG"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&tr.indexOf(e.tagName.toLowerCase())>=0},e.prototype.removeText=function(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]===t&&(n.splice(r,1),r--);return n.join(" ")+" "},e.prototype.openLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeLink=function(e){var t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);for(var n=T(e.item.selectParent[0],"a")||e.item.selectParent[0],r=n.parentNode,i=[];n.firstChild;null)i.push(r.insertBefore(n.firstChild,n));r.removeChild(n),i&&1===i.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(i[i.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(var o=0;o<t.length;o++)for(var a=t[o].querySelectorAll("a"),s=0;s<a.length;s++)document.getSelection().containsNode(a[s],!0)&&(a[s].outerHTML=a[s].innerHTML);e.item.selection.restore(),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Mr=function(){function e(e){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(Zn,this.applyAlignment,this),this.parent.observer.on(qt,this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:e.callBack}),e.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:e.callBack}),e.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:e.callBack}),e.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getTableNode=function(e){return[T(e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode,"td,th")]},e.prototype.applyAlignment=function(e){var t="Table"===e.value,n=this.parent.nodeSelection.getRange(this.parent.currentDocument),r=this.parent.nodeSelection.save(n,this.parent.currentDocument);if(t)x(this.getTableNode(n)[0],{"text-align":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(r);for(var i=this.parent.domNode.blockNodes(),o=0;o<i.length;o++)x(i[o],{"text-align":this.alignments[e.subCommand]});var a=this.parent.domNode.getImageTagInSelection();for(o=0;o<a.length;o++){var s=[];s.push(a[o]),this.parent.imgObj.imageCommand({item:{selectNode:s},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),r=this.parent.domNode.saveMarker(r),fr()&&gr(this.parent.editableElement,e.selector),r.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(n):this.parent.domNode.blockNodes()})},e}(),Sr=function(){function e(e){this.indentValue=20,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(Qn,this.applyIndents,this),this.parent.observer.on(qt,this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:e.callBack}),e.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyIndents=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(n);for(var r=this.parent.domNode.blockNodes(),i=r.slice(),o=[],a=0;a<i.length;a++)"LI"!==i[a].tagName&&"LI"===i[a].parentNode.tagName?(r.splice(r.indexOf(i[a]),1),o.push(i[a].parentNode)):"LI"===i[a].tagName&&(r.splice(r.indexOf(i[a]),1),o.push(i[a]));for(o.length>0&&this.parent.observer.notify(qt,{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==e.subCommand,which:9,action:"indent"},ignoreDefault:!0}),a=0;a<r.length;a++){var s=r[a],l=s.style.marginLeft,d=void 0;"Indent"===e.subCommand?(d=""===l?this.indentValue+"px":parseInt(l,null)+this.indentValue+"px",s.style.marginLeft=d):(d=""===l||"0px"===l?"":parseInt(l,null)-this.indentValue+"px",s.style.marginLeft=d)}this.parent.editableElement.focus(),fr()&&gr(this.parent.editableElement,e.selector),(n=this.parent.domNode.saveMarker(n)).restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e}(),wr="e-imgright",Tr="e-imgleft",xr="e-imgcenter",Lr="e-imgbreak",Dr="e-caption-inline",kr=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(Xn,this.imageCommand,this)},e.prototype.imageCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"image":case"replace":this.createImage(e);break;case"insertlink":this.insertImageLink(e);break;case"openimagelink":this.openImageLink(e);break;case"editimagelink":this.editImageLink(e);break;case"removeimagelink":this.removeImageLink(e);break;case"remove":this.removeImage(e);break;case"alttext":this.insertAltTextImage(e);break;case"dimension":this.imageDimension(e);break;case"caption":this.imageCaption(e);break;case"justifyleft":this.imageJustifyLeft(e);break;case"justifycenter":this.imageJustifyCenter(e);break;case"justifyright":this.imageJustifyRight(e);break;case"inline":this.imageInline(e);break;case"break":this.imageBreak(e)}},e.prototype.createImage=function(e){if(e.item.url=s(e.item.url)||"undefined"===e.item.url?e.item.src:e.item.url,s(e.item.selectParent)||"IMG"!==e.item.selectParent[0].tagName){var t=m("img");this.setStyle(t,e),s(e.item.selection)||e.item.selection.restore(),s(e.selector)||"pasteCleanupModule"!==e.selector?Nr.Insert(this.parent.currentDocument,t,this.parent.editableElement):e.callBack({requestType:"Image",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]})}else{var n=e.item.selectParent[0];this.setStyle(n,e)}e.callBack&&(s(e.selector)||!s(e.selector)&&"pasteCleanupModule"!==e.selector)&&e.callBack({requestType:"Image",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.setStyle=function(e,t){s(t.item.url)||e.setAttribute("src",t.item.url),e.setAttribute("class","e-rte-image"+(s(t.item.cssClass)?"":" "+t.item.cssClass)),s(t.item.altText)||e.setAttribute("alt",t.item.altText),s(t.item.width)||s(t.item.width.width)||e.setAttribute("width",this.calculateStyleValue(t.item.width.width)),s(t.item.height)||s(t.item.height.height)||e.setAttribute("height",this.calculateStyleValue(t.item.height.height)),s(t.item.width)||s(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),s(t.item.width)||s(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),s(t.item.height)||s(t.item.height.minHeight)||(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),s(t.item.height)||s(t.item.height.maxHeight)||(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.insertImageLink=function(e){var t=m("a",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(e.item.selection.restore(),t.setAttribute("contenteditable","true")),t.appendChild(e.item.selectNode[0]),s(e.item.target)||t.setAttribute("target",e.item.target),Nr.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)},e.prototype.openImageLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeImageLink=function(e){var t=e.item.selectParent[0];if(t.classList.contains("e-img-caption")){var n=M(".e-img-wrap",t),r=M(".e-img-inner",t),i=r.cloneNode(!0);N(M("a",t)),N(r),n.appendChild(e.item.insertElement),n.appendChild(i)}else N(t),F.isIE&&e.item.selection.restore(),Nr.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)},e.prototype.editImageLink=function(e){e.item.selectNode[0].parentElement.href=e.item.url,s(e.item.target)?e.item.selectNode[0].parentElement.removeAttribute("target"):e.item.selectNode[0].parentElement.target=e.item.target,this.callBack(e)},e.prototype.removeImage=function(e){T(e.item.selectNode[0],"a")?"A"!==e.item.selectNode[0].parentElement.nodeName||s(e.item.selectNode[0].parentElement.innerText)?N(T(e.item.selectNode[0],"a")):N(e.item.selectNode[0]):s(T(e.item.selectNode[0],".e-img-caption"))?N(e.item.selectNode[0]):N(T(e.item.selectNode[0],".e-img-caption")),this.callBack(e)},e.prototype.insertAltTextImage=function(e){e.item.selectNode[0].setAttribute("alt",e.item.altText),this.callBack(e)},e.prototype.imageDimension=function(e){var t=e.item.selectNode[0];t.style.height="",t.style.width="",t.width=e.item.width,t.height=e.item.height,this.callBack(e)},e.prototype.imageCaption=function(e){Nr.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)},e.prototype.imageJustifyLeft=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),f([t],"e-rte-image"),s(T(t,".e-img-caption"))||(g([T(t,".e-img-caption")],wr),f([T(t,".e-img-caption")],Tr)),"A"===t.parentElement.nodeName?(g([t.parentElement],wr),f([t.parentElement],Tr)):f([t],Tr),this.callBack(e)},e.prototype.imageJustifyCenter=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),f([t],"e-rte-image"),s(T(t,".e-img-caption"))||(g([T(t,".e-img-caption")],Tr),g([T(t,".e-img-caption")],wr),f([T(t,".e-img-caption")],xr)),"A"===t.parentElement.nodeName?(g([t.parentElement],Tr),g([t.parentElement],wr),f([t.parentElement],xr),f([t],xr)):f([t],xr),this.callBack(e)},e.prototype.imageJustifyRight=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),f([t],"e-rte-image"),s(T(t,".e-img-caption"))||(g([T(t,".e-img-caption")],Tr),f([T(t,".e-img-caption")],wr)),"A"===t.parentElement.nodeName?(g([t.parentElement],Tr),f([t.parentElement],wr)):f([t],wr),this.callBack(e)},e.prototype.imageInline=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),f([t],"e-rte-image"),f([t],"e-imginline"),s(T(t,".e-img-caption"))||(g([T(t,".e-img-caption")],Lr),g([T(t,".e-img-caption")],xr),g([T(t,".e-img-caption")],Tr),g([T(t,".e-img-caption")],wr),f([T(t,".e-img-caption")],Dr)),this.callBack(e)},e.prototype.imageBreak=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),f([t],Lr),f([t],"e-rte-image"),s(T(t,".e-img-caption"))||(g([T(t,".e-img-caption")],Dr),g([T(t,".e-img-caption")],xr),g([T(t,".e-img-caption")],Tr),g([T(t,".e-img-caption")],wr),f([T(t,".e-img-caption")],Lr)),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Or=function(){function e(){}return e.prototype.getFormattedNode=function(e,t,n){var r=this.getFormatParent(e,t,n);return null!==r&&r!==n?r:null},e.prototype.getFormatParent=function(e,t,n){do{e=e.parentNode}while(e&&e!==n&&!this.isFormattedNode(e,t));return e},e.prototype.isFormattedNode=function(t,n){switch(n){case"bold":return e.isBold(t);case"italic":return e.isItalic(t);case"underline":return e.isUnderline(t);case"strikethrough":return e.isStrikethrough(t);case"superscript":return e.isSuperscript(t);case"subscript":return e.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},e.isBold=function(e){return-1!==["strong","b"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"bold"!==e.style.fontWeight)},e.isItalic=function(e){return-1!==["em","i"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"italic"!==e.style.fontStyle)},e.isUnderline=function(e){return-1!==["u"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"underline"!==e.style.textDecoration)},e.isStrikethrough=function(e){return-1!==["del","strike"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"line-through"!==e.style.textDecoration)},e.isSuperscript=function(e){return-1!==["sup"].indexOf(e.nodeName.toLowerCase())},e.isSubscript=function(e){return-1!==["sub"].indexOf(e.nodeName.toLowerCase())},e.prototype.isFontColor=function(t){var n=t.style&&t.style.color;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&""!==n&&void 0!==n},e.prototype.isBackgroundColor=function(t){var n=t.style&&t.style.backgroundColor;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&""!==n&&void 0!==n},e.prototype.isFontSize=function(t){var n=t.style&&t.style.fontSize;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&""!==n&&void 0!==n},e.prototype.isFontName=function(t){var n=t.style&&t.style.fontFamily;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&""!==n&&void 0!==n},e.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var"],e}(),Rr=function(){function e(){}return e.applyFormat=function(e,t,n,r,i){if(["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1){"backgroundcolor"===t&&""===r&&(r="transparent");var o,a=new lr,l=new ur(n,e),d=new br,c=new Or,h=a.getRange(e),p=a.save(h,e),u=h.collapsed?a.getSelectionNodeCollection(h):a.getSelectionNodeCollectionBr(h),m=!1,f=!1,g=!1,v=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1;if(h.collapsed){var y=c.getFormattedNode(h.startContainer,t,n),b=s(y)?null:null===y.getAttribute("style")?y.nodeName:y.nodeName+"[style='"+y.getAttribute("style")+"']";if(u.length>0)m=!0,h=d.GetCursorRange(e,h,u[0]);else if(3===h.startContainer.nodeType&&(h.startContainer.parentElement.childElementCount>0&&h.startOffset>0&&"br"!==h.startContainer.parentElement.firstElementChild.tagName.toLowerCase()||!s(y)&&y===h.startContainer.parentElement.closest(b)&&0!=h.startContainer.parentElement.closest(b).textContent.replace(new RegExp(String.fromCharCode(8203),"g"),"").trim().length))m=!0,h=d.GetCursorRange(e,h,h.startContainer),u.push(h.startContainer);else{var C=this.insertCursorNode(e,a,h,c,d,t,r,n);a.endContainer=a.startContainer=a.getNodeArray(C,!0);var N="BR"===C.nodeName&&C.parentNode.childNodes;s(N)||1!==N.length||"BR"!==N[0].nodeName||0!==u.length?a.endOffset=a.startOffset=1:(a.setSelectionText(e,h.startContainer,h.endContainer,0,0),g=!0),"BR"===C.nodeName&&0===C.parentNode.textContent.length&&(g=!0)}}o=h.collapsed;for(var E=!1,M=0;M<u.length;M++){var S=c.getFormattedNode(u[M],t,n);null===S&&("subscript"===t?E=null!==(S=c.getFormattedNode(u[M],"superscript",n)):"superscript"===t&&(E=null!==(S=c.getFormattedNode(u[M],"subscript",n)))),0===M&&null===S&&(f=!0),u[M]=null===S||f&&!v?this.insertFormat(e,u,M,S,o,f,v,h,d,t,r):this.removeFormat(u,M,S,o,f,v,h,d,t,r,a,n,l),a=this.applySelection(u,a,d,M,m)}fr()&&gr(n,i),g||p.restore(),E&&this.applyFormat(e,t,n)}},e.insertCursorNode=function(e,t,n,r,i,o,a,l){var d=t.getNodeCollection(n),c=new ur(l,e),h=d.length>0?d.length>1&&n.startContainer===n.endContainer?this.getCursorFormat(r,d,o,l):r.getFormattedNode(d[0],o,l):null,p=null;if(h){if(p=d[0],8203===h.firstChild.textContent.charCodeAt(0)&&3===h.firstChild.nodeType){var u=new RegExp(String.fromCharCode(8203),"g"),m=void 0;h.firstChild===p?(p.textContent=h.parentElement&&(c.isBlockNode(h.parentElement)&&h.parentElement.textContent.length<=1?h.parentElement.childElementCount>1:0===h.childElementCount)&&(h.parentElement.textContent.length>1||h.parentElement.firstChild&&1===h.parentElement.firstChild.nodeType)?p.textContent:p.textContent.replace(u,""),m=p):(h.firstChild.textContent=h.firstChild.textContent.replace(u,""),m=h.firstChild);var f=void 0;if(0===m.textContent.length)if(s(m.previousSibling)){if(!s(m.parentElement)&&0===m.parentElement.textContent.length){var g=document.createElement("BR");m.parentElement.appendChild(g),N(m),p=g,t.setCursorPoint(e,p.parentElement,0)}}else p=m.previousSibling,f=m.textContent.length-1,t.setCursorPoint(e,m,f)}["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(o)>-1?("fontcolor"===o?h.style.color=a:"fontname"===o?h.style.fontFamily=a:"fontsize"===o?h.style.fontSize=a:h.style.backgroundColor=a,p=h):yr.unwrap(h)}else d.length>1&&n.startOffset>0&&d[0].firstElementChild&&"br"===d[0].firstElementChild.tagName.toLowerCase()&&(d[0].innerHTML=""),1!==d.length||0!==n.startOffset||"BR"!==d[0].nodeName&&"BR"!==d[0].nextSibling.nodeName||N("#text"===d[0].nodeName?d[0].nextSibling:d[0]),p=this.getInsertNode(e,n,o,a).firstChild;return p},e.getCursorFormat=function(e,t,n,r){for(var i,o=0;o<t.length;o++)i=t[o].lastElementChild?t[o].lastElementChild:t[o];return e.getFormattedNode(i,n,r)},e.removeFormat=function(e,t,n,r,i,o,a,l,d,c,h,p,u){var m,f,g=null,v="#text"===a.startContainer.nodeName?a.startContainer.textContent.substring(a.startOffset,a.startContainer.textContent.length):a.startContainer.textContent;if(a.startContainer!==a.endContainer||0!==a.startOffset||a.endOffset!==a.startContainer.length){var y=[],b=e[t];do{y.push(h.getIndex(b)),b=b.parentNode}while(b&&b!==n);if("BR"!==e[t].nodeName&&(b=g=r&&n.textContent.length-1===a.startOffset?l.SplitNode(a,n,!0):l.GetSpliceNode(a,n)),r){for(var C=g;null!==C.firstChild&&3!==C.firstChild.nodeType;null)C=C.firstChild;C.innerHTML="&#8203;",e[t]=C.firstChild}else{for(;b&&b.childNodes.length>0&&y.length-1>=0&&b.childNodes.length>y[y.length-1];)b=b.childNodes[y[y.length-1]],y.pop();if("BR"!==e[t].nodeName)if(3!==b.nodeType||r&&""===b.nodeValue){var E=document.createElement("div");E.innerHTML="&#8203;",3!==b.nodeType?(b.insertBefore(E.firstChild,b.firstChild),e[t]=b.firstChild):(b.parentNode.insertBefore(E.firstChild,b),e[t]=b.previousSibling,b.parentNode.removeChild(b))}else e[t]=b}}if("backgroundcolor"===d&&(m=n.style.fontSize),"fontsize"===d){var M=T(e[t].parentElement,"span[style*=background-color]");s(M)||(f=M.style.backgroundColor)}var S=n.getAttribute("style"),w=n.tagName,x=yr.unwrap(n);if(x[0]&&!o)for(var L=x[t]?x[t]:x[0],D=L;L&&L.parentElement&&L.parentElement!==p;L=L)if(L.parentElement&&L.parentElement.tagName.toLocaleLowerCase()===n.tagName.toLocaleLowerCase()&&(L.parentElement.childElementCount>1||a.startOffset>1)){if(D.parentElement&&D.parentElement.tagName.toLocaleLowerCase()===n.tagName.toLocaleLowerCase()&&a.startOffset===a.endOffset&&1!==D.nodeType&&!s(D.textContent)&&D.parentElement.childElementCount>1&&(a.setStart(D,0),a.setEnd(D,D.textContent.length),l.SplitNode(a,D.parentElement,!1)),"span"===L.parentElement.tagName.toLocaleLowerCase()&&"underline"===n.style.textDecoration&&"underline"!==L.parentElement.style.textDecoration){L=L.parentElement;continue}yr.unwrap(L.parentElement),L=s(L.parentElement)||u.isBlockNode(L.parentElement)?L.parentElement:D}else L=L.parentElement;if(x.length>0&&o){for(var k=0;k<x.length;k++)(3!==x[k].nodeType||x[k].textContent&&x[k].textContent.trim().length>0)&&(x[k]=yr.Wrap(x[k],this.GetFormatNode(d,c,w,S)),x[k].textContent===v&&(0===k?a.setStartBefore(x[k]):k===x.length-1&&a.setEndAfter(x[k])));var O=e[t].parentElement;if(s(m)||""===m||(O.style.fontSize=m),s(f)||""===f||(O.style.backgroundColor=f),"backgroundcolor"===d&&!s(m)&&""!==m&&O.parentElement.innerHTML===O.outerHTML){var R=O.parentElement;R.parentElement.insertBefore(O,R),N(R)}if("fontsize"===d||"fontcolor"===d){for(var P=e[t].parentElement,A=e[t].parentElement;!s(A)&&"li"!==A.tagName.toLowerCase();)P=A=A.parentElement;s(P)||"li"!==P.tagName.toLowerCase()||P.textContent.trim()!==e[t].textContent.trim()||("fontsize"===d?P.style.fontSize=c:(P.style.color=c,P.style.textDecoration="inherit"))}}return e[t]},e.insertFormat=function(e,t,n,r,i,o,a,l,d,c,h){if(i)"uppercase"!==c&&"lowercase"!==c?(p=this.getInsertNode(e,l,c,h),t[n]=p.firstChild,d.position=1):d.position=l.startOffset;else if(null===r&&o||a){if("BR"!==t[n].nodeName&&(t[n]=d.GetSpliceNode(l,t[n]),t[n].textContent=d.TrimLineBreak(t[n].textContent)),"uppercase"===c||"lowercase"===c)t[n].textContent="uppercase"===c?t[n].textContent.toLocaleUpperCase():t[n].textContent.toLocaleLowerCase();else if(!0!==a||""!==h){var p=this.GetFormatNode(c,h);if("fontsize"===c||"fontcolor"===c){for(var u=t[n].parentElement,m=t[n].parentElement;!s(m)&&"li"!==m.tagName.toLowerCase();)u=m=m.parentElement;if(s(u)||"li"!==u.tagName.toLowerCase()||u.textContent.trim()!==t[n].textContent.trim()||("fontsize"===c?u.style.fontSize=h:(u.style.color=h,u.style.textDecoration="inherit")),t[n]=this.applyStyles(t,n,p),"fontsize"===c){var f=T(t[n].parentElement,"span[style*=background-color]");s(f)||(t[n].parentElement.style.backgroundColor=f.style.backgroundColor)}}else t[n]=this.applyStyles(t,n,p)}}else t[n]=d.GetSpliceNode(l,t[n]);return t[n]},e.applyStyles=function(e,t,n){return"BR"!==e[t].nodeName&&(e[t]=t===e.length-1||"BR"===e[t].nodeName?yr.Wrap(e[t],n):yr.WrapBefore(e[t],n,!0),e[t]=this.getChildNode(e[t],n)),e[t]},e.getInsertNode=function(e,t,n,r){var i=this.GetFormatNode(n,r);if(i.innerHTML="&#8203;",F.isIE){var o=e.createDocumentFragment();o.appendChild(i),t.insertNode(o)}else t.insertNode(i);return i},e.getChildNode=function(e,t){return null==e&&(t.innerHTML="&#8203;",e=t.firstChild),e},e.applySelection=function(e,t,n,r,i){return 1!==e.length||i?1===e.length&&i?(t.startContainer=t.getNodeArray(e[r],!0),t.endContainer=t.startContainer,t.startOffset=n.position,t.endOffset=n.position):0===r?(t.startContainer=t.getNodeArray(e[r],!0),t.startOffset=0):r===e.length-1&&(t.endContainer=t.getNodeArray(e[r],!1),t.endOffset=e[r].textContent.length):(t.startContainer=t.getNodeArray(e[r],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=e[r].textContent.length),t},e.GetFormatNode=function(e,t,n,r){var i;switch(e){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return i=document.createElement("span"),this.updateStyles(i,n,r),i.style.textDecoration="underline",i;case"strikethrough":return i=document.createElement("span"),this.updateStyles(i,n,r),i.style.textDecoration="line-through",i;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return i=document.createElement("span"),this.updateStyles(i,n,r),i.style.color=t,i.style.textDecoration="inherit",i;case"fontname":return i=document.createElement("span"),this.updateStyles(i,n,r),i.style.fontFamily=t,i;case"fontsize":return i=document.createElement("span"),this.updateStyles(i,n,r),i.style.fontSize=t,i;default:return i=document.createElement("span"),this.updateStyles(i,n,r),i.style.backgroundColor=t,i}},e.updateStyles=function(e,t,n){null!==n&&"SPAN"===t&&e.setAttribute("style",n)},e}(),Pr=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(ir,this.applySelection,this),this.parent.observer.on(qt,this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){e.event.ctrlKey&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),Rr.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement),this.callBack(e,e.event.action))},e.prototype.applySelection=function(e){Rr.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.value,e.selector),this.callBack(e,e.subCommand)},e.prototype.callBack=function(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ar=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(or,this.applyHtml,this)},e.prototype.applyHtml=function(e){Nr.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0),"pasteCleanup"===e.subCommand?e.callBack({requestType:e.subCommand,editorMode:"HTML",elements:e.value}):e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Hr=function(){function e(){}return e.clear=function(e,t,n){var r=new lr,i=new br,o=r.getRange(e),a=o.collapsed,s=r.getInsertNodeCollection(o),l=r.save(o,e);if(!a){var d=i.GetSpliceNode(o,s[0]);if(1===s.length)r.setSelectionContents(e,d),o=r.getRange(e);else{for(var c=1,h=s[s.length-c];"BR"===s[s.length-c].nodeName;)c++,h=s[s.length-c];var p=i.GetSpliceNode(o,h);r.setSelectionText(e,d,p,0,3===p.nodeType?p.textContent.length:p.childNodes.length),o=r.getRange(e)}var u=r.getNodeCollection(o),m=u.slice();this.clearInlines(r.getSelectionNodes(m),m,r.getRange(e),i,t),this.reSelection(e,l,u),o=r.getRange(e);var f=(u=r.getNodeCollection(o)).slice();this.clearBlocks(e,f,t,i,r),fr()&&gr(t,n),this.reSelection(e,l,u)}},e.reSelection=function(e,t,n){var r=t.getInsertNodes(n);t.startContainer=t.getNodeArray(r[0],!0,e),t.startOffset=0,t.endContainer=t.getNodeArray(r[r.length-1],!1,e);var i=r[r.length-1];t.endOffset=3===i.nodeType?i.textContent.length:i.childNodes.length,t.restore()},e.clearBlocks=function(e,t,n,r,i){for(var o=[],a=0;a<t.length;a++)this.BLOCK_TAGS.indexOf(t[a].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[a])?o.push(t[a]):this.BLOCK_TAGS.indexOf(t[a].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[a].parentNode)&&n!==t[a].parentNode&&o.push(t[a].parentNode);o=this.spliceParent(o,t)[0],o=this.removeParent(o),this.unWrap(e,o,r,i)},e.spliceParent=function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].childNodes.length,i=0;i<r;i++)if(t.indexOf(e[n].childNodes[i])>0&&e[n].childNodes[i].childNodes.length>0&&(t=this.spliceParent([e[n].childNodes[i]],t)[1]),t.indexOf(e[n].childNodes[i])<=-1&&""!==e[n].childNodes[i].textContent.trim()){for(var o=0;o<r;o++)t.indexOf(e[n].childNodes[o])>-1&&t.splice(t.indexOf(e[n].childNodes[o]),1);i=e[n].childNodes.length;var a=e.indexOf(e[n].parentNode),s=t.indexOf(e[n].parentNode);a>-1&&e.splice(a,1),s>-1&&t.splice(s,1);var l=t.indexOf(e[n]);l>-1&&t.splice(l,1),e.splice(n,1),n--}return[e,t]},e.removeChild=function(e,t){var n=t.childNodes.length;if(n>0)for(var r=0;r<n;r++)e.indexOf(t.childNodes[r])>-1&&(e=this.removeChild(e,t.childNodes[r])).splice(e.indexOf(t.childNodes[r]),1);return e},e.removeParent=function(e){for(var t=0;t<e.length;t++)e.indexOf(e[t].parentNode)>-1&&((e=this.removeChild(e,e[t])).splice(t,1),t--);return e},e.unWrap=function(e,t,n,r){for(var i=0;i<t.length;i++)if(this.NONVALID_TAGS.indexOf(t[i].nodeName.toLowerCase())>-1&&t[i].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[i].parentNode.nodeName.toLowerCase())>-1&&(r.setSelectionText(e,t[i],t[i],0,t[i].childNodes.length),yr.unwrap(n.GetSpliceNode(r.getRange(e),t[i].parentNode))),"p"!==t[i].nodeName.toLocaleLowerCase()){!(this.NONVALID_PARENT_TAGS.indexOf(t[i].nodeName.toLowerCase())<0&&"p"!==t[i].parentNode.nodeName.toLocaleLowerCase())||("blockquote"===t[i].nodeName.toLocaleLowerCase()||"li"===t[i].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[i].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[i].childNodes.length&&"p"===t[i].childNodes[0].nodeName.toLocaleLowerCase()||yr.Wrap(t[i],e.createElement("p"));var o=yr.unwrap(t[i]);1===o.length&&"p"===o[0].parentNode.nodeName.toLocaleLowerCase()&&(yr.Wrap(t[i],e.createElement("p")),yr.unwrap(t[i]));for(var a=0;a<o.length;a++)if(this.NONVALID_TAGS.indexOf(o[a].nodeName.toLowerCase())>-1)this.unWrap(e,[o[a]],n,r);else if(this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&"p"!==o[a].nodeName.toLocaleLowerCase()){var s=this.removeParent([o[a]]);this.unWrap(e,s,n,r)}else this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&o[a].parentNode.nodeName.toLocaleLowerCase()===o[a].nodeName.toLocaleLowerCase()?yr.unwrap(o[a]):this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&"p"===o[a].nodeName.toLocaleLowerCase()&&(yr.Wrap(o[a],e.createElement("p")),yr.unwrap(o[a]))}else yr.Wrap(t[i],e.createElement("p")),yr.unwrap(t[i])},e.clearInlines=function(e,t,n,r,i){for(var o=0;o<e.length;o++)e[o].parentNode&&Or.inlineTags.indexOf(e[o].parentNode.nodeName.toLocaleLowerCase())>-1&&(r.GetSpliceNode(n,e[o].parentNode),this.removeInlineParent(e[o].parentNode))},e.removeInlineParent=function(e){for(var t=yr.unwrap(e),n=0;n<t.length;n++)1===t[n].parentNode.childNodes.length&&Or.inlineTags.indexOf(t[n].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(t[n].parentNode):Or.inlineTags.indexOf(t[n].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(t[n])},e.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"],e.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],e.IGNORE_PARENT_TAGS=["ul","ol","table"],e.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],e}(),Ir=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(sr,this.applyClear,this),this.parent.observer.on(qt,this.onKeyDown,this)},e.prototype.onKeyDown=function(e){"clear-format"===e.event.action&&(this.applyClear({subCommand:"ClearFormat",callBack:e.callBack}),e.event.preventDefault())},e.prototype.applyClear=function(e){"ClearFormat"===e.subCommand&&(Hr.clear(this.parent.currentDocument,this.parent.editableElement,e.selector),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},e}(),Br=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=s(t)?30:t.undoRedoSteps,this.undoRedoTimer=s(t)?300:t.undoRedoTimer,this.addEventListener()}return e.prototype.addEventListener=function(){var e=d(this.keyUp,this.undoRedoTimer);this.parent.observer.on(Ut,e,this),this.parent.observer.on(qt,this.keyDown,this),this.parent.observer.on(zt,this.onAction,this),this.parent.observer.on(Vt,this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,n=Object.keys(e.newProp);t<n.length;t++)switch(n[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}},e.prototype.removeEventListener=function(){this.parent.observer.off(Ut,this.keyUp),this.parent.observer.off(qt,this.keyDown),this.parent.observer.off(zt,this.onAction)},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=(new lr).getRange(this.parent.currentDocument),n=(new lr).save(t,this.parent.currentDocument),r={text:this.parent.editableElement.innerHTML,range:n};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===n.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===n.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===n.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===r.text.trim()||(this.undoRedoStack.push(r),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,n=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML=n,this.parent.editableElement.focus(),fr()&&gr(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text,this.parent.editableElement.focus(),fr()&&gr(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),Fr=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(ar,this.insertText,this)},e.prototype.insertText=function(e){var t=document.createTextNode(e.value);Nr.Insert(this.parent.currentDocument,t),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),jr=function(){function e(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new lr,this.domNode=new ur(this.editableElement,this.currentDocument),this.observer=new ee(this),this.listObj=new vr(this),this.formatObj=new Cr(this),this.alignmentObj=new Mr(this),this.indentsObj=new Sr(this),this.linkObj=new Er(this),this.imgObj=new kr(this),this.selectionObj=new Pr(this),this.inserthtmlObj=new Ar(this),this.insertTextObj=new Fr(this),this.clearObj=new Ir(this),this.undoRedoManager=new Br(this,e.options),this.wireEvents()}return e.prototype.wireEvents=function(){this.observer.on(jt,this.editorKeyDown,this),this.observer.on(Wt,this.editorKeyUp,this),this.observer.on(Wt,this.editorKeyUp,this),this.observer.on(Kt,this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this)},e.prototype.onWordPaste=function(e){this.observer.notify("ms_word_cleanup_plugin",e)},e.prototype.onPropertyChanged=function(e){this.observer.notify(Vt,e)},e.prototype.editorKeyDown=function(e){this.observer.notify(qt,e)},e.prototype.editorKeyUp=function(e){this.observer.notify(Ut,e)},e.prototype.execCommand=function(e,t,n,r,i,o,a){switch(e.toLocaleLowerCase()){case"lists":this.observer.notify(_t,{subCommand:t,event:n,callBack:r,selector:a});break;case"formats":this.observer.notify(Gt,{subCommand:t,event:n,callBack:r,selector:a,exeValue:o});break;case"alignments":this.observer.notify(Zn,{subCommand:t,event:n,callBack:r,selector:a,value:o});break;case"indents":this.observer.notify(Qn,{subCommand:t,event:n,callBack:r,selector:a});break;case"links":this.observer.notify(Yn,{command:e,value:t,item:o,event:n,callBack:r});break;case"images":this.observer.notify(Xn,{command:e,value:t,item:o,event:n,callBack:r,selector:a});break;case"font":case"style":case"effects":case"casing":this.observer.notify(ir,{subCommand:t,event:n,callBack:r,value:i,selector:a});break;case"inserthtml":this.observer.notify(or,{subCommand:t,callBack:r,value:i});break;case"inserttext":this.observer.notify(ar,{subCommand:t,callBack:r,value:i});break;case"clear":this.observer.notify(sr,{subCommand:t,event:n,callBack:r,selector:a});break;case"actions":this.observer.notify(zt,{subCommand:t,event:n,callBack:r,selector:a})}},e}(),zr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gr=function(e){function t(t){var n=e.call(this)||this;return n.initialize(),a(n,n,t,!0),n.currentDocument&&n.element&&n.updateFormatter(n.element,n.currentDocument,t.options),n}return zr(t,e),t.prototype.initialize=function(){this.keyConfig=dr},t.prototype.updateFormatter=function(e,t,n){e&&t&&(this.editorManager=new jr({document:t,editableElement:e,options:n}))},t}(Jn),qr=function(){function e(e,t){this.parent=e,this.serviceLocator=t}return e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.createElement("div",{className:"e-rte-content",id:this.parent.getID()+"rte-view"}),n=Gn(e.value,e);this.editableElement=this.parent.createElement("div",{className:"e-content",id:this.parent.getID()+"_rte-edit-view",attrs:{contenteditable:"true"},innerHTML:n}),t.appendChild(this.editableElement),this.setPanel(t),e.element.appendChild(t)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getEditPanel=function(){return this.editableElement},e.prototype.getText=function(){return this.getEditPanel().textContent},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},e}(),_r=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(wt,this.enableXhtmlValidation,this)},e.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(this.clean(this.parent.inputElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.parent.setProperties({value:this.parent.inputElement.innerHTML},!0))},e.prototype.AddRootElement=function(){if(1===this.parent.inputElement.childNodes.length&&"DIV"!==this.parent.inputElement.firstChild.nodeName||this.parent.inputElement.childNodes.length>1){for(var e=this.parent.createElement("div");this.parent.inputElement.childNodes.length>0;)e.appendChild(this.parent.inputElement.childNodes[0]);this.parent.inputElement.appendChild(e)}},e.prototype.clean=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];8===n.nodeType||"V:IMAGE"===n.nodeName?(e.removeChild(n),t--):1===n.nodeType&&this.clean(n)}return this.parent.inputElement.innerHTML},e.prototype.ImageTags=function(){for(var e=this.parent.inputElement.querySelectorAll("IMG"),t=e.length-1;t>=0;t--)e[t].hasAttribute("alt")||e[t].setAttribute("alt","")},e.prototype.removeTags=function(){for(var e=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])},e.prototype.RemoveElementNode=function(e,t){for(var n=this.parent.inputElement.querySelectorAll(t),r=0;r<n.length;r++)for(var i=n[r].querySelectorAll(e),o=i.length;o>0;o--)N(i[o-1])},e.prototype.RemoveUnsupported=function(){for(var e=this.parent.inputElement.querySelectorAll("u"),t=e.length-1;t>=0;t--){var n=this.parent.createElement("span");n.style.textDecoration="underline",n.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(n,e[t]),N(e[t])}var r=this.parent.inputElement.querySelectorAll("strong");for(t=r.length-1;t>=0;t--){var i=this.parent.createElement("b");i.innerHTML=r[t].innerHTML,r[t].parentNode.insertBefore(i,r[t]),N(r[t])}var o=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(t=0;t<=o.length;t++)this.RemoveAttributeByName(o[t])},e.prototype.RemoveAttributeByName=function(e){if(null!==this.parent.inputElement.firstChild&&3!==this.parent.inputElement.firstChild.nodeType)for(var t=0;t<this.parent.inputElement.childNodes.length;t++){var n=this.parent.inputElement.childNodes[t];if(3!==n.nodeType&&"TABLE"!==n.nodeName&&"TBODY"!==n.nodeName&&"THEAD"!==n.nodeName&&"TH"!==n.nodeName&&"TR"!==n.nodeName&&"TD"!==n.nodeName&&(n.hasAttribute(e)&&n.removeAttribute(e),n.hasChildNodes()))for(var r=0;r<n.childNodes.length;r++){var i=n.childNodes[r];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&i.hasAttribute(e)&&i.removeAttribute(e),i.hasChildNodes())for(var o=0;o<i.childNodes.length;o++)3!==i.childNodes[o].nodeType&&"TABLE"!==i.childNodes[o].nodeName&&"TBODY"!==i.childNodes[o].nodeName&&"THEAD"!==i.childNodes[o].nodeName&&"TH"!==i.childNodes[o].nodeName&&"TR"!==i.childNodes[o].nodeName&&"TD"!==i.childNodes[o].nodeName&&i.childNodes[o].hasAttribute(e)&&i.childNodes[o].removeAttribute(e)}}},e}(),Ur=function(){function e(e,t){this.rangeCollection=[],this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.xhtmlValidation=new _r(e),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener()},e.prototype.sanitizeHelper=function(e){return function(e,t){if(t.enableHtmlSanitizer){var n=An.beforeSanitize();a(n,n,{cancel:!1,helper:null}),t.trigger("beforeSanitizeHtml",n),n.cancel&&!s(n.helper)?e=n.helper(e):n.cancel||(e=An.serializeValue(n,e))}return e}(e,this.parent)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.nodeSelectionObj=new lr,this.parent.on(tt,this.instantiateRenderer,this),this.parent.on(st,this.onKeyDown,this),this.parent.on(nt,this.render,this),this.parent.on(ot,this.onPropertyChanged,this),this.parent.on(rt,this.destroy,this),this.parent.on(bt,this.selectAll,this),this.parent.on(Ct,this.selectRange,this),this.parent.on(Nt,this.getSelectedHtml,this),this.parent.on(gt,this.onSelectionSave,this),this.parent.on(vt,this.onSelectionRestore,this),this.parent.on(St,this.updateReadOnly,this),this.parent.on(Et,this.onPaste,this))},e.prototype.updateReadOnly=function(){this.parent.readonly?(E(this.parent.contentModule.getEditPanel(),{contenteditable:"false"}),f([this.parent.element],At)):(E(this.parent.contentModule.getEditPanel(),{contenteditable:"true"}),g([this.parent.element],At))},e.prototype.onSelectionSave=function(){var e=this.contentRenderer.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)},e.prototype.onSelectionRestore=function(e){this.parent.isBlur=!1,this.contentRenderer.getEditPanel().focus(),(s(e.items)||e.items)&&this.saveSelection.restore()},e.prototype.onKeyDown=function(e){if(9===e.args.keyCode&&this.parent.enableTabKey){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),n=this.nodeSelectionObj.getParentNodeCollection(t);if("LI"!==n[0].nodeName&&!T(n[0],"li")&&!T(n[0],"table")||0!==t.startOffset)if(e.args.preventDefault(),e.args.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var r=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(),r,r,0,r.textContent.length),Nr.Insert(this.contentRenderer.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else Nr.Insert(this.contentRenderer.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()))}"space"!==e.args.action&&"enter"!==e.args.action||this.spaceLink(e.args)},e.prototype.onPaste=function(e){var t=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(e.text.match(t)){e.args.preventDefault();for(var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=(this.parent.formatter.editorManager.nodeSelection.save(n,this.parent.contentModule.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),i=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),o=e.text.split("\n"),a="",l=0;l<o.length;l++)if(""===o[l].trim())a+="<p><br></p>";else{for(var d="",c=!0,h=o[l].split(" "),p=0;p<h.length;p++)""===h[p].trim()?d+=c?"&nbsp;":" ":(c=!1,d+=h[p]+" ");a+="<p>"+d.trim()+"</p>"}var u=this.parent.createElement("div");u.innerHTML=a;var m=u.querySelectorAll("p");for(l=0;l<m.length;l++){var f=m[l].innerHTML.split(" "),g="";for(p=0;p<f.length;p++)f[p].match(r)||f[p].match(i)?g+='<a className="e-rte-anchor" href="'+f[p]+'" title="'+f[p]+'">'+f[p]+" </a>":g+=f[p]+" ";m[l].innerHTML=g.trim()}s(this.parent.pasteCleanupModule)?this.parent.executeCommand("insertHTML",u):e.callBack(u.innerHTML)}},e.prototype.spaceLink=function(e){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),n=this.nodeSelectionObj.getParentNodeCollection(t),r=t.startContainer.textContent.substr(0,t.endOffset),i=r.split(" "),o=i[i.length-1],a=t.startOffset-(r.length-i[i.length-1].length);o=o.slice(0,a);var s=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==n[0].nodeName&&o.match(s)){var l=this.nodeSelectionObj.save(t,this.parent.contentModule.getDocument()),d={url:o.indexOf("http")>-1?o:"http://"+o,selection:l,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),text:o,title:"",target:"_blank"};this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},e,d)}},e.prototype.instantiateRenderer=function(){this.renderFactory.addRenderer(Qe.Content,new qr(this.parent,this.locator))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(nt,this.render),this.parent.off(ot,this.onPropertyChanged),this.parent.off(rt,this.destroy),this.parent.off(st,this.onKeyDown),this.parent.off(tt,this.instantiateRenderer),this.parent.off(bt,this.selectAll),this.parent.off(Ct,this.selectRange),this.parent.off(Nt,this.getSelectedHtml),this.parent.off(gt,this.onSelectionSave),this.parent.off(vt,this.onSelectionRestore),this.parent.off(St,this.updateReadOnly),this.parent.off(Et,this.onPaste))},e.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(Qe.Content);var e=this.contentRenderer.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};if(s(this.parent.formatter)){var n=new Gr({currentDocument:this.contentRenderer.getDocument(),element:e,options:t});this.parent.setProperties({formatter:n},!0)}else this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),t);this.parent.enableXhtml&&this.parent.notify(wt,{}),this.parent.notify("bind-on-end",{})},e.prototype.onPropertyChanged=function(e){if(!s(e.newProp.formatter)){var t=this.contentRenderer.getEditPanel(),n={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),n)}},e.prototype.getModuleName=function(){return"htmlEditor"},e.prototype.selectAll=function(){var e=zn(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)},e.prototype.selectRange=function(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(),e.range)},e.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString())},e}(),Wr=function(){function e(e,t){this.isImgUploaded=!1,this.pageX=null,this.pageY=null,this.deletedImg=[],this.parent=e,this.rteID=e.element.id,this.rendererFactory=t.getService("rendererFactory"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ut,this.deleteImg,this),this.parent.on(nt,this.afterRender,this),this.parent.on(rt,this.removeEventListener,this))},e.prototype.removeEventListener=function(){if(!this.parent.isDestroyed){this.parent.off(ut,this.deleteImg),this.parent.off(nt,this.afterRender),this.parent.off(rt,this.removeEventListener);var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.removeEventListener("drop",this.dragDrop.bind(this),!0),e.removeEventListener("dragstart",this.dragStart.bind(this),!0),e.removeEventListener("dragenter",this.dragEnter.bind(this),!0),e.removeEventListener("dragover",this.dragOver.bind(this),!0),s(this.contentModule)||(j.remove(this.contentModule.getEditPanel(),F.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off(Mt,this.undoStack),this.parent.insertImageSettings.resize&&(j.remove(this.parent.contentModule.getEditPanel(),F.touchStartEvent,this.resizeStart),j.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick)))}},e.prototype.afterRender=function(){this.contentModule=this.rendererFactory.getRenderer(Qe.Content),j.add(this.contentModule.getEditPanel(),F.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(j.add(this.parent.contentModule.getEditPanel(),F.touchStartEvent,this.resizeStart,this),j.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this));var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.addEventListener("drop",this.dragDrop.bind(this),!0),e.addEventListener("dragstart",this.dragStart.bind(this),!0),e.addEventListener("dragenter",this.dragOver.bind(this),!0),e.addEventListener("dragover",this.dragOver.bind(this),!0)},e.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var n=this.parent.createElement("div"),r=(a=this.parent.formatter.getUndoRedoStack()[t].text,s=void 0,(s=m("template")).innerHTML=a,s.content instanceof DocumentFragment?s.content:document.createRange().createContextualFragment(a));n.appendChild(r);var i=n.querySelectorAll("img");if(n.querySelector(".e-img-resize")&&i.length>0){for(var o=0;o<i.length;o++)i[o].style.outline="";N(n.querySelector(".e-img-resize")),this.parent.formatter.getUndoRedoStack()[t].text=n.innerHTML}}var a,s},e.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor="auto",F.isDevice&&g([e.target.parentElement],"e-mob-span");var t={event:e,requestType:"images"};this.parent.trigger("resizeStop",t),this.getPointX(e),this.parent.iframeSettings.enable?(window.pageYOffset,this.parent.element.getBoundingClientRect().top,e.clientY):e.pageY,this.parent.formatter.editorManager.observer.on(Mt,this.undoStack,this),this.parent.formatter.saveData()},e.prototype.resizeStart=function(e,t){var n=this;if(!this.parent.readonly){var r=t||e.target;if("IMG"===r.tagName){this.parent.preventDefaultResize(e);var i=r;this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&N(this.imgResizeDiv),this.imageResize(i)}if(r.classList.contains("e-rte-imageboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.imageQTBar.hidePopup(),r.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),r.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),r.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),r.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),F.isDevice&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span"))f([this.imgResizeDiv],"e-mob-span");else{var o={event:e,requestType:"images"};this.parent.trigger("resizeStart",o,(function(e){e.cancel&&n.cancelResizeAction()}))}j.add(this.contentModule.getDocument(),F.touchEndEvent,this.resizeEnd,this)}}},e.prototype.imageClick=function(e){F.isDevice&&("IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName||"IMG"===e.target.tagName?(this.contentModule.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.contentModule.getEditPanel().setAttribute("contenteditable","true")),"IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName&&e.preventDefault()},e.prototype.imageResize=function(e){this.resizeBtnInit(),this.imgEle=e,f([this.imgEle],"e-resize"),this.imgResizeDiv=this.parent.createElement("span",{className:"e-img-resize",id:this.rteID+"_imgResize"}),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),F.isDevice&&f([this.imgResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.imgResizePos(e,this.imgResizeDiv),this.resizeImgDupPos(e),this.contentModule.getEditPanel().appendChild(this.imgResizeDiv),j.add(this.contentModule.getDocument(),F.touchMoveEvent,this.resizing,this)},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},e.prototype.imgResizePos=function(e,t){var n=this.calcPos(e),r=n.top,i=n.left,o=e.width,a=e.height,s=F.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=F.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=i-s+"px",t.querySelector(".e-rte-botLeft").style.top=a-s+r+"px",t.querySelector(".e-rte-botRight").style.left=o-(s-l)+i+"px",t.querySelector(".e-rte-botRight").style.top=a-s+r+"px",t.querySelector(".e-rte-topRight").style.left=o-(s-l)+i+"px",t.querySelector(".e-rte-topRight").style.top=r-s+"px",t.querySelector(".e-rte-topLeft").style.left=i-s+"px",t.querySelector(".e-rte-topLeft").style.top=r-s+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},n=e.getBoundingClientRect(),r=e.ownerDocument,i=(e.offsetParent&&(e.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?T(e,"#"+this.parent.getID()+"_rte-edit-view"):e.offsetParent)||r.documentElement;i&&(i===r.body||i===r.documentElement)&&"static"===i.style.position;)i=i.parentNode;return i&&i!==e&&1===i.nodeType&&(t=i.getBoundingClientRect()),{top:n.top-t.top,left:n.left-t.left}},e.prototype.setAspectRatio=function(e,t,n){if(!s(e.width)){var r=""!==e.style.width?parseInt(e.style.width,10):e.width,i=""!==e.style.height?parseInt(e.style.height,10):e.height;r>i?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(r/i*n,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=r/i*n+"px",e.style.height=n+"px"):(e.setAttribute("width",(r/i*n).toString()),e.setAttribute("height",n.toString())):i>r?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=i/r*t+"px"):(e.setAttribute("width",t.toString()),e.setAttribute("height",(i/r*t).toString())):this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=t+"px"):(e.setAttribute("width",t.toString()),e.setAttribute("height",t.toString()))}},e.prototype.pixToPerc=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},e.prototype.imgDupMouseMove=function(e,t,n){var r=this,i={event:n,requestType:"images"};this.parent.trigger("resizing",i,(function(n){if(n.cancel)r.cancelResizeAction();else{if(parseInt(r.parent.insertImageSettings.minWidth,10)>=parseInt(e,10)||parseInt(r.parent.insertImageSettings.maxWidth,10)<=parseInt(e,10))return;if(!r.parent.insertImageSettings.resizeByPercent&&(parseInt(r.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(r.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10)))return;r.imgEle.parentElement.style.cursor="pointer",r.setAspectRatio(r.imgEle,parseInt(e,10),parseInt(t,10)),r.resizeImgDupPos(r.imgEle),r.imgResizePos(r.imgEle,r.imgResizeDiv),r.parent.setContentHeight("",!1)}}))},e.prototype.resizing=function(e){var t=this.getPointX(e),n=this.getPointY(e),r=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,i=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(n-this.pageY):n-this.pageY,o=parseInt(this.imgDupPos.width,10)+r,a=parseInt(this.imgDupPos.height,10)+i;this.pageX=t,this.pageY=n,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(o+"px",a+"px",e)},e.prototype.cancelResizeAction=function(){j.remove(this.contentModule.getDocument(),F.touchMoveEvent,this.resizing),j.remove(this.contentModule.getDocument(),F.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&(N(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},e.prototype.resizeImgDupPos=function(e){this.imgDupPos={width:""!==e.style.height?this.imgEle.style.width:e.width+"px",height:""!==e.style.height?this.imgEle.style.height:e.height+"px"}},e.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},e.prototype.deleteImg=function(e){if("IMG"===e.selectNode[0].nodeName){var t={img:e.selectNode[0]};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.remvoeResizEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup(),this.cancelResizeAction(),this.parent.trigger("afterImageDelete",t)}},e.prototype.onDocumentClick=function(e){var t=e.target;"IMG"===t.nodeName&&(this.imgEle=t),!s(this.dialogObj)&&(!T(t,"#"+this.dialogObj.element.id)&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!T(t,"#"+this.parent.getID()+"_toolbar_Image")&&!t.querySelector("#"+this.parent.getID()+"_toolbar_Image"))&&(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,jn(this.parent.element,"focusout")),"IMG"===e.target.tagName||!this.imgResizeDiv||this.quickToolObj&&this.quickToolObj.imageQTBar&&this.quickToolObj.imageQTBar.element.contains(e.target)||!this.contentModule.getEditPanel().contains(this.imgResizeDiv)||this.cancelResizeAction(),"IMG"!==t.tagName&&this.contentModule.getEditPanel().querySelector(".e-img-resize")&&(this.remvoeResizEle(),this.contentModule.getEditPanel().querySelector("img").style.outline="")},e.prototype.remvoeResizEle=function(){j.remove(this.contentModule.getDocument(),F.touchMoveEvent,this.resizing),j.remove(this.contentModule.getDocument(),F.touchEndEvent,this.resizeEnd),N(this.contentModule.getEditPanel().querySelector(".e-img-resize"))},e.prototype.dragStart=function(e){if("IMG"!==e.target.nodeName)return!0;this.parent.trigger(dt,e,(function(t){t.cancel?e.preventDefault():(e.dataTransfer.effectAllowed="copyMove",e.target.classList.add(It))}))},e.prototype.dragEnter=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()},e.prototype.dragOver=function(e){if(!("edge"===F.info.name&&e.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||F.isIE&&"Files"===e.dataTransfer.types[0]))return!0;e.preventDefault()},e.prototype.dragDrop=function(e){var t=this,n=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(!(n&&"IMG"===n.tagName||e.dataTransfer.files.length>0))return!0;this.parent.trigger(dt,e,(function(n){if(n.cancel)e.preventDefault();else{if(T(e.target,"#"+t.parent.getID()+"_toolbar"))return void e.preventDefault();t.parent.element.querySelector(".e-img-resize")&&N(t.imgResizeDiv),e.preventDefault();var r=void 0;if(t.contentModule.getDocument().caretRangeFromPoint?r=t.contentModule.getDocument().caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent?(r=t.contentModule.getDocument().createRange()).setStart(e.rangeParent,e.rangeOffset):r=t.getDropRange(e.clientX,e.clientY),t.parent.notify(Ct,{range:r}),t.parent.element.querySelector(".e-droparea"))return;t.insertDragImage(e)}}))},e.prototype.getDropRange=function(e,t){var n=this.contentModule.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),n);var r=this.contentModule.getDocument().elementFromPoint(e,t),i=r.childNodes.length>0?r.childNodes[0]:r,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)n.setStart(i,o),n.setEnd(i,o);else{var a=void 0;do{o++,n.setStart(i,o),n.setEnd(i,o+1),a=n.getBoundingClientRect()}while(a.left<e&&o<i.length-1)}return n},e.prototype.insertDragImage=function(e){e.preventDefault();var t=this.parent.element.querySelector("e-popup-open");if(this.parent.notify("drop",{args:e}),t&&t.classList.add("e-hide"),e.dataTransfer.files.length>0);else{var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(r&&"IMG"===r.tagName){r.nextElementSibling&&r.nextElementSibling.classList.contains("e-img-inner")?n.insertNode(r.parentElement.parentElement):n.insertNode(r),r.classList.remove(It),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());var i=e;this.resizeStart(i,r)}}},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return"image"},e}(),Vr={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},Kr=function(){function e(){}return e.get=function(e,t,n,r,i,o){for(var a=JSON.parse(JSON.stringify(Vr)),s=JSON.parse(JSON.stringify(Vr)),l=new lr,d=o?[o]:l.getNodeCollection(l.getRange(e)),c=d.length,h=0;h<d.length;h++)("BR"!==d[h].nodeName&&3!==d[h].nodeType||c>1&&3===d[h].nodeType&&""===d[h].textContent.trim())&&(d.splice(h,1),h--);for(h=0;h<d.length;h++)a=this.getFormatParent(e,a,d[h],t,n,r,i),(0===h&&a.bold||!a.bold)&&(s.bold=a.bold),(0===h&&a.insertcode||!a.insertcode)&&(s.insertcode=a.insertcode),(0===h&&a.italic||!a.italic)&&(s.italic=a.italic),(0===h&&a.underline||!a.underline)&&(s.underline=a.underline),(0===h&&a.strikethrough||!a.strikethrough)&&(s.strikethrough=a.strikethrough),(0===h&&a.superscript||!a.superscript)&&(s.superscript=a.superscript),(0===h&&a.subscript||!a.subscript)&&(s.subscript=a.subscript),(0===h&&a.fontcolor||!a.fontcolor)&&(s.fontcolor=a.fontcolor),(0===h&&a.fontname||!a.fontname)&&(s.fontname=a.fontname),(0===h&&a.fontsize||!a.fontsize)&&(s.fontsize=a.fontsize),(0===h&&a.backgroundcolor||!a.backgroundcolor)&&(s.backgroundcolor=a.backgroundcolor),(0===h&&a.orderedlist||!a.orderedlist)&&(s.orderedlist=a.orderedlist),(0===h&&a.unorderedlist||!a.unorderedlist)&&(s.unorderedlist=a.unorderedlist),(0===h&&a.alignments||!a.alignments)&&(s.alignments=a.alignments),(0===h&&a.formats||!a.formats)&&(s.formats=a.formats),(0===h&&a.createlink||!a.createlink)&&(s.createlink=a.createlink),a=JSON.parse(JSON.stringify(Vr));return s},e.getFormatParent=function(e,t,n,r,i,o,a){if(r.contains(n)||3===n.nodeType&&3!==r.nodeType&&r.contains(n.parentNode))do{t=this.isFormattedNode(e,t,n,i,o,a),n=n.parentNode}while(n&&n!==r);return t},e.isFormattedNode=function(e,t,n,r,i,o){return t.bold||(t.bold=Or.isBold(n)),t.italic||(t.italic=Or.isItalic(n)),t.underline||(t.underline=Or.isUnderline(n)),t.strikethrough||(t.strikethrough=Or.isStrikethrough(n)),t.superscript||(t.superscript=Or.isSuperscript(n)),t.subscript||(t.subscript=Or.isSubscript(n)),t.fontcolor||(t.fontcolor=this.isFontColor(e,n)),t.fontname||(t.fontname=this.isFontName(e,n,o)),t.fontsize||(t.fontsize=this.isFontSize(n,i)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(n)),t.orderedlist||(t.orderedlist=this.isOrderedList(n)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(n)),t.alignments||(t.alignments=this.isAlignment(n)),t.formats||(t.formats=this.isFormats(n,r),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(n)),t},e.isFontColor=function(e,t){var n=t.style&&t.style.color;return null!=n&&""!==n||3===t.nodeType||(n=this.getComputedStyle(e,t,"color")),null!==n&&""!==n&&void 0!==n?n:null},e.isLink=function(e){return"a"===e.nodeName.toLocaleLowerCase()},e.isBackgroundColor=function(e){var t=e.style&&e.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null},e.isFontSize=function(e,t){var n=e.style&&e.style.fontSize;return null!==n&&""!==n&&void 0!==n&&(null==t||t.indexOf(n)>-1)?n:null},e.isFontName=function(e,t,n){var r=t.style&&t.style.fontFamily;null!=r&&""!==r||3===t.nodeType||(r=this.getComputedStyle(e,t,"font-family"));var i=null;return null!==r&&""!==r&&void 0!==r&&(null==n||n.filter((function(e,t){var n=new RegExp(r,"i");(e.replace(/"/g,"").replace(/ /g,"")===r.replace(/"/g,"").replace(/ /g,"")||e.search(n)>-1)&&(i=t)}))&&null!==i)?null!==i?n[i]:r.replace(/"/g,""):null},e.isOrderedList=function(e){return"ol"===e.nodeName.toLocaleLowerCase()},e.isUnorderedList=function(e){return"ul"===e.nodeName.toLocaleLowerCase()},e.isAlignment=function(e){var t=e.style&&e.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null},e.isFormats=function(e,t){return null==t&&tr.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null},e.getComputedStyle=function(e,t,n){return e.defaultView.getComputedStyle(t,null).getPropertyValue(n)},e}();$n.Inject(Ur,Wr);var $r={};$r.RichTextEditor=$n,$r.HtmlEditor=Ur,$r.Image=Wr,$r.ToolbarStatus=Kr;var Jr={richtexteditor:$r};window.ejs=Jr,window.ej=Jr})();